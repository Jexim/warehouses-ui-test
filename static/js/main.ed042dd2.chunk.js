(this["webpackJsonpwarehouses-ui-test"]=this["webpackJsonpwarehouses-ui-test"]||[]).push([[0],{118:function(e,t,r){},141:function(e,t,r){},142:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"warehouses",(function(){return ct})),r.d(n,"products",(function(){return Bt}));var a=r(0),s=r.n(a),o=r(20),i=r.n(o),u=r(11),c=r(12),l=r(13),p=r(14),d=r(15),h=r(148),f=r(149),v=r(83),b=r(17),m=r(4),w=r.n(m),y=r(6),g=r(144),O=r(150),E=r(147),k=r(2),x=r(9),j=r(43),S=r.n(j),D="warehouses.SET_SELECTED_ITEM",C="warehouses.SET_SELECTED_LOADING",P="warehouses.SET_SELECTED_ERROR",M="warehouses.SET_SELECTED_PRODUCTS_ITEMS",q="warehouses.SET_SELECTED_PRODUCTS_FOR_MOVE",T="warehouses.SET_SELECTED_PRODUCTS_FOR_DELETE",W="warehouses.SET_SELECTED_PRODUCTS_ERROR",F="warehouses.SET_SELECTED_PRODUCTS_LOADING",I="warehouses.SET_LIST_ITEMS",R="warehouses.SET_LIST_LOADING",_="warehouses.SET_LIST_ERROR",L="warehouses.SET_LIST_PAGE",N="warehouses.SET_LIST_TOTAL_COUNT",A=r(16),B=r.n(A),Q="https://warehouses-mock-api-test.herokuapp.com";function H(e){return U.apply(this,arguments)}function U(){return(U=Object(y.a)(w.a.mark((function e(t){var r,n,a,s,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.page,n=t.limit,a=t.searchString,s=void 0===a?"":a,e.prev=1,e.next=4,B.a.get("".concat(Q,"/warehouses?_page=").concat(r,"&_limit=").concat(n,"&title_like=").concat(s));case 4:return o=e.sent,e.abrupt("return",{items:o.data,totalCount:o.headers["x-total-count"]});case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function G(){return Y.apply(this,arguments)}function Y(){return(Y=Object(y.a)(w.a.mark((function e(){var t,r,n,a=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.productId,e.prev=1,e.next=4,B.a.get("".concat(Q,"/products/").concat(r,"/warehousesProducts?_expand=warehouse"));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function J(e){return V.apply(this,arguments)}function V(){return(V=Object(y.a)(w.a.mark((function e(t){var r,n,a,s,o,i,u,c,l,p;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,n=t.productsDistributions,e.prev=1,a=n.reduce((function(e,t){return e+t.quantity}),0),e.next=5,B.a.post("".concat(Q,"/warehouses"),{title:r,productsQuantity:a});case 5:s=e.sent,o=!0,i=!1,u=void 0,e.prev=9,c=n[Symbol.iterator]();case 11:if(o=(l=c.next()).done){e.next=19;break}if(!((p=l.value).quantity>0)){e.next=16;break}return e.next=16,B.a.post("".concat(Q,"/warehousesProducts"),{warehouseId:s.data.id,productId:p.product.id,quantity:p.quantity});case 16:o=!0,e.next=11;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),i=!0,u=e.t0;case 25:e.prev=25,e.prev=26,o||null==c.return||c.return();case 28:if(e.prev=28,!i){e.next=31;break}throw u;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return e.abrupt("return",s.data);case 36:throw e.prev=36,e.t1=e.catch(1),e.t1;case 39:case"end":return e.stop()}}),e,null,[[1,36],[9,21,25,33],[26,,28,32]])})))).apply(this,arguments)}function $(e){return z.apply(this,arguments)}function z(){return(z=Object(y.a)(w.a.mark((function e(t){var r,n,a,s,o,i,u,c,l,p,d,h,f,v,b,m,y,g,O,E,k,x,j,S,D,C,P,M,q,T,W,F,I,R,_;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.title,a=t.productsDistributions,s=void 0===a?[]:a,o=t.productsForDelete,i=void 0===o?[]:o,u=t.productsForMove,c=void 0===u?[]:u,e.prev=1,l=s.reduce((function(e,t){return e+t.quantity}),0),e.next=5,B.a.put("".concat(Q,"/warehouses/").concat(r),{title:n,productsQuantity:l});case 5:p=e.sent,d=!0,h=!1,f=void 0,e.prev=9,v=s[Symbol.iterator]();case 11:if(d=(b=v.next()).done){e.next=29;break}if(!((m=b.value).isNew&&m.quantity>0)){e.next=18;break}return e.next=16,B.a.post("".concat(Q,"/warehousesProducts"),{warehouseId:p.data.id,productId:m.product.id,quantity:m.quantity});case 16:e.next=26;break;case 18:if(!m.edited||m.isNew){e.next=26;break}if(!(m.quantity>0)){e.next=24;break}return e.next=22,B.a.put("".concat(Q,"/warehousesProducts/").concat(m.id),{warehouseId:p.data.id,productId:m.product.id,quantity:m.quantity});case 22:e.next=26;break;case 24:return e.next=26,B.a.delete("".concat(Q,"/warehousesProducts/").concat(m.id));case 26:d=!0,e.next=11;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(9),h=!0,f=e.t0;case 35:e.prev=35,e.prev=36,d||null==v.return||v.return();case 38:if(e.prev=38,!h){e.next=41;break}throw f;case 41:return e.finish(38);case 42:return e.finish(35);case 43:y=!0,g=!1,O=void 0,e.prev=46,E=c[Symbol.iterator]();case 48:if(y=(k=E.next()).done){e.next=88;break}x=k.value,j=!0,S=!1,D=void 0,e.prev=53,C=x.warehousesDistributions[Symbol.iterator]();case 55:if(j=(P=C.next()).done){e.next=71;break}if(!((M=P.value).quantity>0)){e.next=68;break}return e.next=60,B.a.get("".concat(Q,"/warehousesProducts?productId=").concat(x.productDistributions.product.id,"&warehouseId=").concat(M.warehouse.id));case 60:if(!(q=e.sent).data.length){e.next=66;break}return e.next=64,B.a.put("".concat(Q,"/warehousesProducts/").concat(q.data[0].id),{warehouseId:M.warehouse.id,productId:x.productDistributions.product.id,quantity:q.data[0].quantity+M.quantity});case 64:e.next=68;break;case 66:return e.next=68,B.a.post("".concat(Q,"/warehousesProducts"),{warehouseId:M.warehouse.id,productId:x.productDistributions.product.id,quantity:M.quantity});case 68:j=!0,e.next=55;break;case 71:e.next=77;break;case 73:e.prev=73,e.t1=e.catch(53),S=!0,D=e.t1;case 77:e.prev=77,e.prev=78,j||null==C.return||C.return();case 80:if(e.prev=80,!S){e.next=83;break}throw D;case 83:return e.finish(80);case 84:return e.finish(77);case 85:y=!0,e.next=48;break;case 88:e.next=94;break;case 90:e.prev=90,e.t2=e.catch(46),g=!0,O=e.t2;case 94:e.prev=94,e.prev=95,y||null==E.return||E.return();case 97:if(e.prev=97,!g){e.next=100;break}throw O;case 100:return e.finish(97);case 101:return e.finish(94);case 102:T=!0,W=!1,F=void 0,e.prev=105,I=i[Symbol.iterator]();case 107:if(T=(R=I.next()).done){e.next=114;break}return _=R.value,e.next=111,B.a.delete("".concat(Q,"/warehousesProducts/").concat(_.id));case 111:T=!0,e.next=107;break;case 114:e.next=120;break;case 116:e.prev=116,e.t3=e.catch(105),W=!0,F=e.t3;case 120:e.prev=120,e.prev=121,T||null==I.return||I.return();case 123:if(e.prev=123,!W){e.next=126;break}throw F;case 126:return e.finish(123);case 127:return e.finish(120);case 128:return e.abrupt("return",p.data);case 131:throw e.prev=131,e.t4=e.catch(1),e.t4;case 134:case"end":return e.stop()}}),e,null,[[1,131],[9,31,35,43],[36,,38,42],[46,90,94,102],[53,73,77,85],[78,,80,84],[95,,97,101],[105,116,120,128],[121,,123,127]])})))).apply(this,arguments)}function K(e){return X.apply(this,arguments)}function X(){return(X=Object(y.a)(w.a.mark((function e(t){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.delete("".concat(Q,"/warehouses/").concat(t.id));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var Z="https://warehouses-mock-api-test.herokuapp.com";function ee(){return te.apply(this,arguments)}function te(){return(te=Object(y.a)(w.a.mark((function e(){var t,r,n,a,s,o,i=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},r=t.page,n=t.limit,a=t.searchString,s=void 0===a?"":a,e.prev=1,e.next=4,B.a.get("".concat(Z,"/products?_page=").concat(r,"&_limit=").concat(n,"&title_like=").concat(s));case 4:return o=e.sent,e.abrupt("return",{items:o.data,totalCount:o.headers["x-total-count"]});case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function re(){return ne.apply(this,arguments)}function ne(){return(ne=Object(y.a)(w.a.mark((function e(){var t,r,n,a=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.warehouseId,e.prev=1,e.next=4,B.a.get("".concat(Z,"/warehouses/").concat(r,"/warehousesProducts?_expand=product"));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ae(e){return se.apply(this,arguments)}function se(){return(se=Object(y.a)(w.a.mark((function e(t){var r,n,a,s,o,i,u,c,l,p,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,n=t.quantity,a=t.warehousesDistributions,e.prev=1,s=n-a.reduce((function(e,t){return e+t.quantity}),0),e.next=5,B.a.post("".concat(Z,"/products"),{title:r,quantity:n,freeQuantity:s});case 5:o=e.sent,i=!0,u=!1,c=void 0,e.prev=9,l=a[Symbol.iterator]();case 11:if(i=(p=l.next()).done){e.next=19;break}if(!((d=p.value).quantity>0)){e.next=16;break}return e.next=16,B.a.post("".concat(Z,"/warehousesProducts"),{warehouseId:d.warehouse.id,productId:o.data.id,quantity:d.quantity});case 16:i=!0,e.next=11;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),u=!0,c=e.t0;case 25:e.prev=25,e.prev=26,i||null==l.return||l.return();case 28:if(e.prev=28,!u){e.next=31;break}throw c;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return e.abrupt("return",o.data);case 36:throw e.prev=36,e.t1=e.catch(1),e.t1;case 39:case"end":return e.stop()}}),e,null,[[1,36],[9,21,25,33],[26,,28,32]])})))).apply(this,arguments)}function oe(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(y.a)(w.a.mark((function e(t){var r,n,a,s,o,i,u,c,l,p,d,h,f,v,b,m,y,g,O;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.title,a=t.quantity,s=t.warehousesDistributions,o=t.warehousesForDelete,e.prev=1,i=a-s.reduce((function(e,t){return e+t.quantity}),0),e.next=5,B.a.put("".concat(Z,"/products/").concat(r),{title:n,quantity:a,freeQuantity:i});case 5:u=e.sent,c=!0,l=!1,p=void 0,e.prev=9,d=s[Symbol.iterator]();case 11:if(c=(h=d.next()).done){e.next=29;break}if(!((f=h.value).isNew&&f.quantity>0)){e.next=18;break}return e.next=16,B.a.post("".concat(Z,"/warehousesProducts"),{warehouseId:f.warehouse.id,productId:r,quantity:f.quantity});case 16:e.next=26;break;case 18:if(!f.edited||f.isNew){e.next=26;break}if(!(f.quantity>0)){e.next=24;break}return e.next=22,B.a.put("".concat(Z,"/warehousesProducts/").concat(f.id),{warehouseId:f.warehouse.id,productId:r,quantity:f.quantity});case 22:e.next=26;break;case 24:return e.next=26,B.a.delete("".concat(Z,"/warehousesProducts/").concat(f.id));case 26:c=!0,e.next=11;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(9),l=!0,p=e.t0;case 35:e.prev=35,e.prev=36,c||null==d.return||d.return();case 38:if(e.prev=38,!l){e.next=41;break}throw p;case 41:return e.finish(38);case 42:return e.finish(35);case 43:v=!0,b=!1,m=void 0,e.prev=46,y=o[Symbol.iterator]();case 48:if(v=(g=y.next()).done){e.next=55;break}return O=g.value,e.next=52,B.a.delete("".concat(Z,"/warehousesProducts/").concat(O.id));case 52:v=!0,e.next=48;break;case 55:e.next=61;break;case 57:e.prev=57,e.t1=e.catch(46),b=!0,m=e.t1;case 61:e.prev=61,e.prev=62,v||null==y.return||y.return();case 64:if(e.prev=64,!b){e.next=67;break}throw m;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return e.abrupt("return",u.data);case 72:throw e.prev=72,e.t2=e.catch(1),e.t2;case 75:case"end":return e.stop()}}),e,null,[[1,72],[9,31,35,43],[36,,38,42],[46,57,61,69],[62,,64,68]])})))).apply(this,arguments)}function ue(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(y.a)(w.a.mark((function e(t){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.delete("".concat(Z,"/products/").concat(t.id));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var le="products.SET_SELECTED_ITEM",pe="products.SET_SELECTED_LOADING",de="products.SET_SELECTED_ERROR",he="products.SET_SELECTED_WAREHOUSES_FOR_DELETE",fe="products.SET_SELECTED_WAREHOUSES_ITEMS",ve="products.SET_SELECTED_WAREHOUSES_ERROR",be="products.SET_SELECTED_WAREHOUSES_LOADING",me="products.SET_LIST_ITEMS",we="products.SET_LIST_LOADING",ye="products.SET_LIST_ERROR",ge="products.SET_LIST_PAGE",Oe="products.SET_LIST_TOTAL_COUNT";function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(r,!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(){return function(){var e=Object(y.a)(w.a.mark((function e(t,r){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r().products.list.pagination.loading||0!==r().products.list.pagination.totalCount&&r().products.list.pagination.totalCount<=r().products.list.items.length)){e.next=3;break}return e.abrupt("return");case 3:return t({type:ye,error:null}),t({type:we,loading:!0}),e.next=7,ee({page:r().products.list.pagination.page,limit:r().products.list.pagination.limit});case 7:n=e.sent,t({type:me,items:[].concat(Object(x.a)(r().products.list.items),Object(x.a)(n.items))}),t({type:ge,page:r().products.list.pagination.page+1}),t({type:Oe,totalCount:n.totalCount}),t({type:we,loading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),t({type:ye,error:e.t0}),t({type:we,loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}()}function je(){return function(){var e=Object(y.a)(w.a.mark((function e(t,r){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r(),t({type:ve,error:null}),t({type:be,loading:!0}),e.next=6,G({productId:n.products.selected.item.id});case 6:a=e.sent,t({type:fe,items:[].concat(Object(x.a)(n.products.selected.warehouses.items),Object(x.a)(a))}),t({type:be,loading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:ve,error:e.t0}),t({type:be,loading:!1});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()}function Se(){return function(e){e({type:le,product:{}}),e({type:de,error:null}),e({type:pe,loading:!1}),e({type:fe,items:[]}),e({type:ve,error:null}),e({type:be,loading:!1}),e({type:he,warehousesForDelete:[]})}}function De(e){var t=e.title,r=e.quantity;return function(){var e=Object(y.a)(w.a.mark((function e(n,a){var s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={},t&&(s.title=t),r>=0&&(s.quantity=r,s.freeQuantity=r-a().products.selected.warehouses.items.reduce((function(e,t){return e+t.quantity}),0)),n({type:le,product:ke({},a().products.selected.item,{},s)});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function Ce(e){return function(){var t=Object(y.a)(w.a.mark((function t(r,n){var a,s,o,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r({type:de,error:null}),r({type:pe,loading:!0}),-1===n().products.selected.warehouses.items.findIndex((function(e){return!e.warehouse}))){t.next=5;break}throw new Error("Not all warehouse are selected, check the fields");case 5:if(a=n().products.selected.item.id,s=n().products.list.items,!a){t.next=15;break}return i=s.findIndex((function(e){return e.id===a})),t.next=11,oe(ke({},n().products.selected.item,{warehousesDistributions:n().products.selected.warehouses.items,warehousesForDelete:n().products.selected.warehousesForDelete}));case 11:o=t.sent,-1!==i&&(s[i]=o),t.next=19;break;case 15:return t.next=17,ae(ke({},n().products.selected.item,{warehousesDistributions:n().products.selected.warehouses.items,warehousesForDelete:n().products.selected.warehousesForDelete}));case 17:o=t.sent,n().products.list.pagination.totalCount===n().products.list.items.length&&(s.push(o),r({type:Oe,totalCount:n().products.list.pagination.totalCount+1}));case 19:if(e){t.next=22;break}return t.next=22,r(Te({warehousesDistributions:n().products.selected.warehouses.items}));case 22:r({type:me,items:Object(x.a)(s)}),r({type:pe,loading:!1}),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(0),r({type:de,error:t.t0}),r({type:pe,loading:!1});case 30:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(e,r){return t.apply(this,arguments)}}()}function Pe(e){return function(){var t=Object(y.a)(w.a.mark((function t(r,n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:le,product:e}),t.next=3,r(je());case 3:return t.next=5,r(Ce(!0));case 5:r(Se());case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function Me(e){var t=e.warehouseDistributions,r=e.warehouse,n=e.quantity;return function(){var e=Object(y.a)(w.a.mark((function e(a,s){var o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=s().products.selected.item,r&&(t.firstWarehouse||(t.firstWarehouse=t.warehouse),t.warehouse=r),n>=0&&o.freeQuantity+t.quantity>=n&&(t.quantity=n,o.freeQuantity=o.quantity-s().products.selected.warehouses.items.reduce((function(e,t){return e+t.quantity}),0)),t.edited=!0,a({type:fe,items:Object(x.a)(s().products.selected.warehouses.items)}),a({type:le,product:ke({},s().products.selected.item)});case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function qe(e){return function(){var t=Object(y.a)(w.a.mark((function t(r,n){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isNew||((a=n().products.selected.warehousesForDelete).push(e),r({type:he,warehousesForDelete:Object(x.a)(a)}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function Te(e){var t=e.warehousesDistributions,r=e.skipEdited;return function(){var e=Object(y.a)(w.a.mark((function e(n,a){var s,o,i,u,c,l,p,d,h,f,v,b;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=!0,o=!1,i=void 0,e.prev=3,u=t[Symbol.iterator]();case 5:if(s=(c=u.next()).done){e.next=16;break}if(!(l=c.value).edited&&!r){e.next=13;break}return e.next=10,n(Ae(l.warehouse));case 10:if(!l.firstWarehouse){e.next=13;break}return e.next=13,n(Ae(l.firstWarehouse));case 13:s=!0,e.next=5;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),o=!0,i=e.t0;case 22:e.prev=22,e.prev=23,s||null==u.return||u.return();case 25:if(e.prev=25,!o){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:p=!0,d=!1,h=void 0,e.prev=33,f=a().products.selected.warehousesForDelete[Symbol.iterator]();case 35:if(p=(v=f.next()).done){e.next=42;break}return b=v.value,e.next=39,n(Ae(b.warehouse));case 39:p=!0,e.next=35;break;case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(33),d=!0,h=e.t1;case 48:e.prev=48,e.prev=49,p||null==f.return||f.return();case 51:if(e.prev=51,!d){e.next=54;break}throw h;case 54:return e.finish(51);case 55:return e.finish(48);case 56:case"end":return e.stop()}}),e,null,[[3,18,22,30],[23,,25,29],[33,44,48,56],[49,,51,55]])})));return function(t,r){return e.apply(this,arguments)}}()}function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(r,!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ie(){return function(){var e=Object(y.a)(w.a.mark((function e(t,r){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r().warehouses.list.pagination.loading||0!==r().warehouses.list.pagination.totalCount&&r().warehouses.list.pagination.totalCount<=r().warehouses.list.items.length)){e.next=3;break}return e.abrupt("return");case 3:return t({type:_,error:null}),t({type:R,loading:!0}),e.next=7,H({page:r().warehouses.list.pagination.page,limit:r().warehouses.list.pagination.limit});case 7:n=e.sent,t({type:I,items:[].concat(Object(x.a)(r().warehouses.list.items),Object(x.a)(n.items))}),t({type:L,page:r().warehouses.list.pagination.page+1}),t({type:N,totalCount:n.totalCount}),t({type:R,loading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),t({type:_,error:e.t0}),t({type:R,loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}()}function Re(){return function(){var e=Object(y.a)(w.a.mark((function e(t,r){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r(),t({type:W,error:null}),t({type:F,loading:!0}),e.next=6,re({warehouseId:n.warehouses.selected.item.id});case 6:a=e.sent,t({type:M,items:[].concat(Object(x.a)(n.warehouses.selected.products.items),Object(x.a)(a))}),t({type:F,loading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:W,error:e.t0}),t({type:F,loading:!1});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()}function _e(){return function(e,t){e({type:D,warehouse:null}),e({type:P,error:null}),e({type:C,loading:!1}),e({type:M,items:[]}),e({type:W,error:null}),e({type:F,loading:!1}),e({type:q,productsForMove:[]}),e({type:T,productsForDelete:[]})}}function Le(e){var t=e.title;return function(){var e=Object(y.a)(w.a.mark((function e(r,n){var a,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r({type:P,error:null}),r({type:C,loading:!0}),-1===(a=n().warehouses.selected.products.items).findIndex((function(e){return!e.product}))){e.next=6;break}throw new Error("Not all products are selected, check the fields");case 6:return e.next=8,J({title:t,productsDistributions:a});case 8:return s=e.sent,n().warehouses.list.pagination.totalCount===n().warehouses.list.items.length&&r({type:I,items:[].concat(Object(x.a)(n().warehouses.list.items),[s])}),e.next=12,r(Ye({productsDistributions:a}));case 12:r({type:N,totalCount:n().warehouses.list.pagination.totalCount+1}),r({type:C,loading:!1}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),r({type:P,error:e.t0}),r({type:C,loading:!1});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,r){return e.apply(this,arguments)}}()}function Ne(e,t){var r=e.title;return function(){var e=Object(y.a)(w.a.mark((function e(n,a){var s,o,i,u,c,l,p;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n({type:P,error:null}),n({type:C,loading:!0}),-1===a().warehouses.selected.products.items.findIndex((function(e){return!e.product}))){e.next=5;break}throw new Error("Not all products are selected, check the fields");case 5:if(-1===a().warehouses.selected.productsForMove.findIndex((function(e){return-1!==e.warehousesDistributions.findIndex((function(e){return!e.warehouse}))}))){e.next=7;break}throw new Error("Not all warehouses are selected, check the fields");case 7:return s=a().warehouses.selected.item.id,o=a().warehouses.list.items,i=a().warehouses.selected.products.items,u=a().warehouses.selected.productsForDelete,c=a().warehouses.selected.productsForMove,l=o.findIndex((function(e){return e.id===s})),e.next=15,$({id:s,title:r,productsDistributions:i,productsForDelete:u,productsForMove:c});case 15:if(p=e.sent,o[l]=p,t){e.next=21;break}return e.next=20,n(Ye({productsDistributions:i,productsForDelete:u}));case 20:n(Je({productsForMove:c}));case 21:n({type:I,items:Object(x.a)(o)}),n({type:C,loading:!1}),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(0),n({type:P,error:e.t0}),n({type:C,loading:!1});case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,r){return e.apply(this,arguments)}}()}function Ae(e){return function(){var t=Object(y.a)(w.a.mark((function t(r,n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:D,warehouse:e}),t.next=3,r(Re());case 3:return t.next=5,r(Ne({title:e.title},!0));case 5:r(_e());case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function Be(e){var t=e.warehouseDistributions,r=e.warehouse,n=e.quantity;return function(){var e=Object(y.a)(w.a.mark((function e(a,s){var o,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=s().warehouses.selected.productsForMove,i=o.findIndex((function(e){return e.productDistributions===t.productDistributions})),r&&(t.warehouse=r),n>=0&&(t.productDistributions.quantity+t.quantity-n>=0&&(t.productDistributions.quantity-=n-t.quantity,t.quantity=n),t.productDistributions.moveQuantity=o[i].warehousesDistributions.reduce((function(e,t){return e+t.quantity}),0)),o[i].warehousesDistributions=Object(x.a)(o[i].warehousesDistributions),a({type:q,productsForMove:Object(x.a)(s().warehouses.selected.productsForMove)}),a({type:M,items:Object(x.a)(s().warehouses.selected.products.items)});case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function Qe(e){return function(){var t=Object(y.a)(w.a.mark((function t(r,n){var a,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n().warehouses.selected.productsForMove,s=a.findIndex((function(t){return t.productDistributions===e.productDistributions})),e.productDistributions.moveQuantity=a[s].warehousesDistributions.reduce((function(e,t){return e+t.quantity}),0),a[s].warehousesDistributions=Object(x.a)(a[s].warehousesDistributions),r({type:q,productsForMove:Object(x.a)(n().warehouses.selected.productsForMove)});case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function He(e){return function(){var t=Object(y.a)(w.a.mark((function t(r,n){var a,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n().warehouses.selected.productsForMove,s=a.findIndex((function(t){return t.productDistributions===e})),e.moveQuantity=0,-1!==s&&(e.quantity+=n().warehouses.selected.productsForMove[s].warehousesDistributions.reduce((function(e,t){return e+t.quantity}),0),a.splice(s,1)),r({type:q,productsForMove:Object(x.a)(a)});case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function Ue(e){var t=e.productDistributions,r=e.product,n=e.quantity;return function(){var e=Object(y.a)(w.a.mark((function e(a,s){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&(t.firstProduct||(t.firstProduct=t.product),t.product=r),n>=0&&t.product.freeQuantity+t.quantity-n>=0&&(t.product.freeQuantity-=n-t.quantity,t.quantity=n),t.edited=!0,a({type:M,items:Object(x.a)(s().warehouses.selected.products.items)});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function Ge(e){return function(){var t=Object(y.a)(w.a.mark((function t(r,n){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isNew||((a=n().warehouses.selected.productsForDelete).push(e),r({type:T,productsForDelete:Object(x.a)(a)}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function Ye(e){var t=e.productsDistributions,r=e.productsForDelete,n=void 0===r?[]:r,a=e.skipEdited;return function(){var e=Object(y.a)(w.a.mark((function e(r){var s,o,i,u,c,l,p,d,h,f,v,b;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=!0,o=!1,i=void 0,e.prev=3,u=t[Symbol.iterator]();case 5:if(s=(c=u.next()).done){e.next=16;break}if(!(l=c.value).edited&&!a){e.next=13;break}return e.next=10,r(Pe(l.product));case 10:if(!l.firstProduct){e.next=13;break}return e.next=13,r(Pe(l.firstProduct));case 13:s=!0,e.next=5;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),o=!0,i=e.t0;case 22:e.prev=22,e.prev=23,s||null==u.return||u.return();case 25:if(e.prev=25,!o){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:p=!0,d=!1,h=void 0,e.prev=33,f=n[Symbol.iterator]();case 35:if(p=(v=f.next()).done){e.next=42;break}return b=v.value,e.next=39,r(Pe(b.product));case 39:p=!0,e.next=35;break;case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(33),d=!0,h=e.t1;case 48:e.prev=48,e.prev=49,p||null==f.return||f.return();case 51:if(e.prev=51,!d){e.next=54;break}throw h;case 54:return e.finish(51);case 55:return e.finish(48);case 56:case"end":return e.stop()}}),e,null,[[3,18,22,30],[23,,25,29],[33,44,48,56],[49,,51,55]])})));return function(t){return e.apply(this,arguments)}}()}function Je(e){var t=e.productsForMove;return function(){var e=Object(y.a)(w.a.mark((function e(r,n){var a,s,o,i,u,c,l,p,d,h,f,v,b;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n().warehouses.list.items,s=!0,o=!1,i=void 0,e.prev=4,u=t[Symbol.iterator]();case 6:if(s=(c=u.next()).done){e.next=36;break}l=c.value,p=!0,d=!1,h=void 0,e.prev=11,f=w.a.mark((function e(){var t,r,n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=b.value).quantity>0)){e.next=10;break}return r=a.findIndex((function(e){return e.id===t.warehouse.id})),e.next=5,re({warehouseId:t.warehouse.id});case 5:return n=e.sent,e.next=8,$(Fe({},t.warehouse,{productsDistributions:n}));case 8:s=e.sent,-1!==r&&(a[r]=s);case 10:case"end":return e.stop()}}),e)})),v=l.warehousesDistributions[Symbol.iterator]();case 14:if(p=(b=v.next()).done){e.next=19;break}return e.delegateYield(f(),"t0",16);case 16:p=!0,e.next=14;break;case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(11),d=!0,h=e.t1;case 25:e.prev=25,e.prev=26,p||null==v.return||v.return();case 28:if(e.prev=28,!d){e.next=31;break}throw h;case 31:return e.finish(28);case 32:return e.finish(25);case 33:s=!0,e.next=6;break;case 36:e.next=42;break;case 38:e.prev=38,e.t2=e.catch(4),o=!0,i=e.t2;case 42:e.prev=42,e.prev=43,s||null==u.return||u.return();case 45:if(e.prev=45,!o){e.next=48;break}throw i;case 48:return e.finish(45);case 49:return e.finish(42);case 50:r({type:I,items:Object(x.a)(a)});case 51:case"end":return e.stop()}}),e,null,[[4,38,42,50],[11,21,25,33],[26,,28,32],[43,,45,49]])})));return function(t,r){return e.apply(this,arguments)}}()}r(118);function Ve(e){var t=e.full;return s.a.createElement("div",{className:"loader-container",style:t&&{position:"absolute"}},s.a.createElement("div",{className:"lds-hourglass"}))}var $e=r(152),ze=r(151),Ke=r(145),Xe=r(82),Ze=r(146),et=r(88);function tt(e){return s.a.createElement("div",{style:{position:"relative"}},s.a.createElement(et.a,e),!!e.disabled&&s.a.createElement("div",{style:{backgroundColor:"rgba(0,0,0,0.05)",position:"absolute",top:0,bottom:0,left:0,right:0,borderRadius:3}}))}function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(r,!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var at=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={warehousesSelectPagination:{page:1,limit:10,totalCount:0,count:0,loading:!1,searchString:""}},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e.warehousesDistributions!==this.props.warehousesDistributions&&this.resetOptions()}},{key:"onChangeWarehouse",value:function(e){this.props.dispatch(Be({warehouseDistributions:this.props.productForMoveItem,warehouse:e.value}))}},{key:"onChangeQuantity",value:function(e){this.props.dispatch(Be({warehouseDistributions:this.props.productForMoveItem,quantity:e}))}},{key:"onClickRemove",value:function(){var e;this.props.dispatch((e=this.props.productForMoveItem,function(){var t=Object(y.a)(w.a.mark((function t(r,n){var a,s,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().warehouses.selected.productsForMove,-1!==(s=a.findIndex((function(t){return t.productDistributions===e.productDistributions})))){t.next=4;break}return t.abrupt("return",console.warn("No found productDistributions for remove"));case 4:if(-1!==(o=a[s].warehousesDistributions.indexOf(e))){t.next=7;break}return t.abrupt("return",console.warn("No found warehousesDistributions for remove"));case 7:a[s].warehousesDistributions.splice(o,1),a[s].warehousesDistributions=Object(x.a)(a[s].warehousesDistributions),e.productDistributions.quantity+=e.quantity,r(Qe(e)),r({type:q,productsForMove:Object(x.a)(a)}),r({type:M,items:Object(x.a)(n().warehouses.selected.products.items)});case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()))}},{key:"loadOptions",value:function(){var e=Object(y.a)(w.a.mark((function e(t){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.warehousesSelectPagination.loading){e.next=2;break}return e.abrupt("return");case 2:return this.setState({warehousesSelectPagination:nt({},this.state.warehousesSelectPagination,{loading:!0})}),t!==this.state.warehousesSelectPagination.searchString&&this.resetOptions(),e.next=6,H({searchString:t,page:this.state.warehousesSelectPagination.page,limit:this.state.warehousesSelectPagination.limit});case 6:return r=e.sent,this.setState({warehousesSelectPagination:nt({},this.state.warehousesSelectPagination,{totalCount:r.totalCount,count:this.state.warehousesSelectPagination.count+r.items.length,page:this.state.warehousesSelectPagination.page+1,loading:!1,searchString:t})}),e.abrupt("return",{options:r.items.map((function(e){return{value:e,label:e.title}})),hasMore:0!==this.state.warehousesSelectPagination.totalCount&&this.state.warehousesSelectPagination.totalCount>this.state.warehousesSelectPagination.count});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterOptionsBySelected",value:function(e){var t=this;return e.filter((function(e){return t.props.selectedWarehouse.id!==e.value.id&&!t.props.warehousesDistributions.find((function(t){return!!t.warehouse&&t.warehouse.id===e.value.id}))}))}},{key:"reduceOptions",value:function(e,t){return[].concat(Object(x.a)(e),Object(x.a)(this.filterOptionsBySelected(t)))}},{key:"resetOptions",value:function(){this.setState({warehousesSelectPagination:nt({},this.state.warehousesSelectPagination,{page:1,totalCount:0,count:0})})}},{key:"render",value:function(){var e=this;return s.a.createElement(ze.a.Row,{className:"py-3 mb-3",style:{backgroundColor:"#ddd",borderRadius:3}},s.a.createElement(v.a,{sm:"4"},s.a.createElement(tt,{cacheUniq:this.props.warehousesDistributions,reduceOptions:function(t,r){return e.reduceOptions(t,r)},loadOptions:function(t){return e.loadOptions(t)},onChange:function(t){return e.onChangeWarehouse(t)}})),s.a.createElement(v.a,{sm:"4"},s.a.createElement(ze.a.Control,{required:!0,placeholder:"Quantity",type:"number",min:0,value:this.props.productForMoveItem.quantity,disabled:!this.props.productForMoveItem.warehouse,onChange:function(t){return e.onChangeQuantity(+t.target.value)}})),s.a.createElement(v.a,{sm:"4"},s.a.createElement(g.a,{block:!0,variant:"danger",onClick:function(){return e.onClickRemove()},className:"w-100"},"Remove")))}}]),t}(a.Component);var st=Object(b.b)((function(e){return{selectedWarehouse:e.warehouses.selected.item}}))(at);function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ot(r,!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ut={selected:{item:null,products:{items:[],error:null,loading:!1},error:null,loading:!1,productsForDelete:[],productsForMove:[]},list:{items:[],error:null,loading:!1,pagination:{page:1,limit:10,totalCount:0}}},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return it({},e,{selected:it({},e.selected,{item:t.warehouse})});case q:return it({},e,{selected:it({},e.selected,{productsForMove:t.productsForMove})});case T:return it({},e,{selected:it({},e.selected,{productsForDelete:t.productsForDelete})});case C:return it({},e,{selected:it({},e.selected,{loading:t.loading})});case P:return it({},e,{selected:it({},e.selected,{error:t.error})});case M:return it({},e,{selected:it({},e.selected,{products:it({},e.selected.products,{items:t.items})})});case W:return it({},e,{selected:it({},e.selected,{products:it({},e.selected.products,{error:t.error})})});case F:return it({},e,{selected:it({},e.selected,{products:it({},e.selected.products,{loading:t.loading})})});case I:return it({},e,{list:it({},e.list,{items:t.items})});case L:return it({},e,{list:it({},e.list,{pagination:it({},e.list.pagination,{page:t.page})})});case N:return it({},e,{list:it({},e.list,{pagination:it({},e.list.pagination,{totalCount:+t.totalCount})})});case R:return it({},e,{list:it({},e.list,{loading:t.loading})});case _:return it({},e,{list:it({},e.list,{error:t.error})});default:return e}};function lt(e,t){var r=e.warehouses.selected.productsForMove.findIndex((function(e){return e.productDistributions===t}));return-1!==r?e.warehouses.selected.productsForMove[r].warehousesDistributions:[]}var pt=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onClickAddProductsMove",value:function(){var e;this.props.dispatch((e=this.props.productDistributions,function(){var t=Object(y.a)(w.a.mark((function t(r,n){var a,s,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n().warehouses.selected.productsForMove,s=a.findIndex((function(t){return t.productDistributions===e})),o={id:S()(),warehouse:null,quantity:0,productDistributions:e},-1===s?a.push({id:S()(),productDistributions:e,warehousesDistributions:[o]}):Array.isArray(a[s].warehousesDistributions)?a[s].warehousesDistributions=[].concat(Object(x.a)(a[s].warehousesDistributions),[o]):a[s].warehousesDistributions=[o],e.quantity-=o.quantity,e.edited=!0,r(Qe(o)),r({type:q,productsForMove:Object(x.a)(a)}),r({type:M,items:Object(x.a)(n().warehouses.selected.products.items)});case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{position:"relative"}},this.props.warehousesDistributions.map((function(t){return s.a.createElement(st,{key:t.id,productForMoveItem:t,warehousesDistributions:e.props.warehousesDistributions})}))),!this.props.productDistributions.quantity<=0&&s.a.createElement(g.a,{block:!0,onClick:function(){return e.onClickAddProductsMove()}},"Add new move"))}}]),t}(a.Component);var dt=Object(b.b)((function(e,t){return{warehousesDistributions:lt(e,t.productDistributions),productsForMove:e.warehouses.selected.productsForMove}}))(pt);function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(r,!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vt=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={productsSelectPagination:{page:1,limit:10,totalCount:0,count:0,loading:!1,searchString:""},showMove:!1},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e.productsDistributions!==this.props.productsDistributions&&this.resetOptions()}},{key:"onChangeProduct",value:function(e){this.props.dispatch(Ue({productDistributions:this.props.productDistributions,product:e.value}))}},{key:"onChangeQuantity",value:function(e){this.props.dispatch(Ue({productDistributions:this.props.productDistributions,quantity:e}))}},{key:"loadOptions",value:function(){var e=Object(y.a)(w.a.mark((function e(t){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.productsSelectPagination.loading){e.next=2;break}return e.abrupt("return");case 2:return this.setState({productsSelectPagination:ft({},this.state.productsSelectPagination,{loading:!0})}),t!==this.state.productsSelectPagination.searchString&&this.resetOptions(),e.next=6,ee({searchString:t,page:this.state.productsSelectPagination.page,limit:this.state.productsSelectPagination.limit});case 6:return r=e.sent,this.setState({productsSelectPagination:ft({},this.state.productsSelectPagination,{totalCount:r.totalCount,count:this.state.productsSelectPagination.count+r.items.length,page:this.state.productsSelectPagination.page+1,loading:!1,searchString:t})}),e.abrupt("return",{options:r.items.map((function(e){return{value:e,label:e.title}})),hasMore:0!==this.state.productsSelectPagination.totalCount&&this.state.productsSelectPagination.totalCount>this.state.productsSelectPagination.count});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterOptionsBySelected",value:function(e){var t=this;return e.filter((function(e){return!t.props.productsDistributions.find((function(t){return!!t.product&&t.product.id===e.value.id}))}))}},{key:"reduceSelectOptions",value:function(e,t){return[].concat(Object(x.a)(e),Object(x.a)(this.filterOptionsBySelected(t)))}},{key:"resetOptions",value:function(){this.setState({productsSelectPagination:ft({},this.state.productsSelectPagination,{page:1,totalCount:0,count:0})})}},{key:"onClickRemove",value:function(){var e;this.props.dispatch(He(this.props.productDistributions)),this.props.dispatch((e=this.props.productDistributions,function(){var t=Object(y.a)(w.a.mark((function t(r,n){var a,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().warehouses.selected.products.items,-1!==(s=a.indexOf(e))){t.next=4;break}return t.abrupt("return",console.warn("No found productDistributions for remove"));case 4:a.splice(s,1),r(Ge(e)),r({type:M,items:Object(x.a)(a)});case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()))}},{key:"onClickMove",value:function(){this.state.showMove&&this.props.dispatch(He(this.props.productDistributions)),this.setState({showMove:!this.state.showMove})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ze.a.Row,{className:"mt-3"},s.a.createElement(v.a,{sm:"4"},s.a.createElement(tt,{disabled:this.state.showMove||this.props.onlyMove||!this.props.productDistributions.isNew,cacheUniq:this.props.productsDistributions,reduceOptions:function(t,r){return e.reduceSelectOptions(t,r)},loadOptions:function(t){return e.loadOptions(t)},onChange:function(t){return e.onChangeProduct(t)},value:this.props.productDistributions.product&&{label:this.props.productDistributions.product.title,value:this.props.productDistributions.product}})),s.a.createElement(v.a,{sm:"4"},s.a.createElement(Ke.a,{className:"mb-3"},s.a.createElement(Xe.a,{placeholder:"Quantity",type:"number",min:0,value:this.props.productDistributions.quantity,disabled:this.state.showMove||this.props.onlyMove||!this.props.productDistributions.product,onChange:function(t){return e.onChangeQuantity(+t.target.value)},"aria-describedby":"free-quantity"}),this.props.productDistributions.product&&s.a.createElement(Ke.a.Append,null,s.a.createElement(Ke.a.Text,{id:"free-quantity"},this.props.productDistributions.product.freeQuantity)))),s.a.createElement(v.a,{sm:"4"},s.a.createElement(Ze.a,{className:"w-100"},!this.props.onlyMove&&s.a.createElement(g.a,{variant:"danger",onClick:function(){return e.onClickRemove()}},"Remove"),this.props.selectedWarehouse&&!this.props.productDistributions.isNew&&s.a.createElement(g.a,{variant:"info",onClick:function(){return e.onClickMove()},active:this.state.showMove},"Move")))),this.state.showMove&&s.a.createElement(dt,{productDistributions:this.props.productDistributions}))}}]),t}(a.Component);var bt=Object(b.b)((function(e){return{selectedWarehouse:e.warehouses.selected.item,productsDistributions:e.warehouses.selected.products.items}}))(vt),mt=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onClickAddProductDistribution",value:function(){this.props.dispatch(function(){var e=Object(y.a)(w.a.mark((function e(t,r){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=r().warehouses.selected.products.items).push({id:S()(),product:null,quantity:0,isNew:!0}),t({type:M,items:Object(x.a)(n)});case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",null,"List of owned products"),!!this.props.selectedWarehouseProductsError&&s.a.createElement(O.a,{variant:"danger"},this.props.selectedWarehouseProductsError.message),s.a.createElement("div",null,this.props.selectedWarehouseProducts.map((function(t){return s.a.createElement(bt,{key:t.id,productDistributions:t,onlyMove:e.props.onlyMove})})),this.props.selectedWarehouseProductsLoading&&s.a.createElement(Ve,null)),!this.props.selectedWarehouseProductsLoading&&!this.props.onlyMove&&s.a.createElement(g.a,{block:!0,className:"mt-3",onClick:function(){return e.onClickAddProductDistribution()}},"Add product"))}}]),t}(a.Component);var wt=Object(b.b)((function(e){return{selectedWarehouseProducts:e.warehouses.selected.products.items,selectedWarehouseProductsLoading:e.warehouses.selected.products.loading,selectedWarehouseProductsError:e.warehouses.selected.products.error}}))(mt);function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(r,!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ot=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={title:"",showBeforeRemoveModal:!1,showMoveBeforeRemoveModal:!1},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.selectedWarehouse!==e.selectedWarehouse&&(this.props.selectedWarehouse?this.setState(gt({},this.props.selectedWarehouse)):this.setState({title:""}))}},{key:"onClickWarehouseSave",value:function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.props.selectedWarehouse){e.next=6;break}return e.next=4,this.props.dispatch(Ne(gt({},this.state)));case 4:e.next=8;break;case 6:return e.next=8,this.props.dispatch(Le(gt({},this.state)));case 8:this.props.selectedError||this.onWarehouseClose();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onWarehouseClose",value:function(){this.setState({id:null,title:"",quantity:0,showBeforeRemoveModal:!1,showMoveBeforeRemoveModal:!1}),this.props.dispatch(_e()),this.props.onClose()}},{key:"featchWarehouseProducts",value:function(){this.props.selectedWarehouse&&this.props.dispatch(Re())}},{key:"onClickRemoveWarehouse",value:function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(function(){var e=Object(y.a)(w.a.mark((function e(t,r){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:P,error:null}),t({type:C,loading:!0}),e.next=5,K(r().warehouses.selected.item);case 5:return n=r().warehouses.selected.products.items,a=r().warehouses.selected.productsForDelete,e.next=9,t(Ye({productsDistributions:n,productsForDelete:a,skipEdited:!0}));case 9:t({type:N,totalCount:r().warehouses.list.pagination.totalCount-1}),t({type:I,items:Object(x.a)(r().warehouses.list.items.filter((function(e){return e.id!==r().warehouses.selected.item.id})))}),t({type:C,loading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),t({type:P,error:e.t0}),t({type:C,loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}());case 2:this.props.selectedError||this.onWarehouseClose();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onClickRemoveWarehouseWithMove",value:function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(Ne(gt({},this.state)));case 2:this.onClickRemoveWarehouse();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onShowBeforeRemoveModal",value:function(){this.props.onClose(),this.setState({showBeforeRemoveModal:!0})}},{key:"onShowMoveBeforeRemoveModal",value:function(){this.setState({showBeforeRemoveModal:!1,showMoveBeforeRemoveModal:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement($e.a,{show:this.props.show,onHide:function(){return e.onWarehouseClose()},onShow:function(){return e.featchWarehouseProducts()}},s.a.createElement(ze.a,{onSubmit:function(t){return e.onClickWarehouseSave(t)}},s.a.createElement($e.a.Header,{closeButton:!0},s.a.createElement($e.a.Title,null,"Warehouse information")),s.a.createElement($e.a.Body,{style:{position:"relative"}},this.props.selectedLoading&&s.a.createElement(Ve,{full:!0}),!!this.props.selectedError&&s.a.createElement(O.a,{variant:"danger"},this.props.selectedError.message),s.a.createElement(ze.a.Group,null,s.a.createElement(ze.a.Label,null,"Warehouse title"),s.a.createElement(ze.a.Control,{type:"text",placeholder:"Enter warehouse title",required:!0,value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),s.a.createElement(wt,null)),s.a.createElement($e.a.Footer,null,s.a.createElement(g.a,{variant:"secondary",onClick:function(){return e.onWarehouseClose()}},"Close"),this.state.id&&s.a.createElement(g.a,{variant:"danger",onClick:function(){return e.onShowBeforeRemoveModal()}},"Remove"),s.a.createElement(g.a,{variant:"primary",type:"submit"},"Save Changes")))),s.a.createElement($e.a,{show:this.state.showBeforeRemoveModal,onHide:function(){return e.onWarehouseClose()}},s.a.createElement($e.a.Header,{closeButton:!0},s.a.createElement($e.a.Title,null,"Question")),s.a.createElement($e.a.Body,{style:{position:"relative"}},"Are you want to remove the warehouse?"),s.a.createElement($e.a.Footer,null,s.a.createElement(g.a,{variant:"secondary",onClick:function(){return e.onWarehouseClose()}},"Close"),!!this.props.selectedWarehouseProducts.length&&s.a.createElement(g.a,{variant:"primary",onClick:function(){return e.onShowMoveBeforeRemoveModal()}},"Move product before remove"),s.a.createElement(g.a,{variant:"danger",onClick:function(){return e.onClickRemoveWarehouse()}},"Yes, remove"))),s.a.createElement($e.a,{show:this.state.showMoveBeforeRemoveModal,onHide:function(){return e.onWarehouseClose()}},s.a.createElement($e.a.Header,{closeButton:!0},s.a.createElement($e.a.Title,null,"Move products for another warehouses")),s.a.createElement($e.a.Body,{style:{position:"relative"}},s.a.createElement(wt,{onlyMove:!0})),s.a.createElement($e.a.Footer,null,s.a.createElement(g.a,{variant:"secondary",onClick:function(){return e.onWarehouseClose()}},"Close"),s.a.createElement(g.a,{variant:"danger",onClick:function(){return e.onClickRemoveWarehouseWithMove()}},"Move and remove"))))}}]),t}(a.Component);var Et=Object(b.b)((function(e){return{selectedWarehouseProducts:e.warehouses.selected.products.items,selectedWarehouse:e.warehouses.selected.item,selectedLoading:e.warehouses.selected.loading,selectedError:e.warehouses.selected.error}}))(Ot),kt=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={showWarehouseModal:!1},r.scrollContainer=null,r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(Ie());case 2:if(!(this.scrollContainer.scrollHeight<=this.scrollContainer.clientHeight&&this.props.listItems.length<this.props.listTotalCount)){e.next=7;break}return e.next=5,this.props.dispatch(Ie());case 5:e.next=2;break;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onClickWarehouse",value:function(e){this.props.dispatch({type:D,warehouse:e}),this.setState({showWarehouseModal:!0})}},{key:"onScrollList",value:function(e){e.scrollHeight-e.scrollTop===e.clientHeight&&this.props.dispatch(Ie())}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{style:{justifyContent:"space-between",display:"flex"},className:"my-3"},s.a.createElement("h4",null,"Warehouses list"),s.a.createElement(g.a,{onClick:function(){return e.setState({showWarehouseModal:!0})}},"Add warehouse"),s.a.createElement(Et,{onClose:function(){return e.setState({showWarehouseModal:!1})},show:this.state.showWarehouseModal})),!!this.props.listError&&s.a.createElement(O.a,{variant:"danger"},this.props.listError.message),s.a.createElement("div",{style:{position:"relative"}},s.a.createElement("div",{className:"list-container",onScroll:function(t){return e.onScrollList(t.target)},ref:function(t){return e.scrollContainer=t}},s.a.createElement(E.a,{striped:!0,bordered:!0,hover:!0,className:"mb-0"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"#"),s.a.createElement("th",null,"Title"),s.a.createElement("th",null,"Products quantity"))),s.a.createElement("tbody",null,this.props.listItems.map((function(t){return s.a.createElement("tr",{key:t.id,onClick:function(){return e.onClickWarehouse(t)}},s.a.createElement("td",null,t.id),s.a.createElement("td",null,t.title),s.a.createElement("td",null,t.productsQuantity))}))))),this.props.listLoading&&s.a.createElement(Ve,{full:!0})))}}]),t}(a.Component);var xt=Object(b.b)((function(e){return{selectedItem:e.warehouses.selected.item,listItems:e.warehouses.list.items,listLoading:e.warehouses.list.loading,listError:e.warehouses.list.error,listTotalCount:e.warehouses.list.pagination.totalCount}}))(kt);function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(r,!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Dt=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={warehousesSelectPagination:{page:1,limit:10,totalCount:0,count:0,loading:!1,searchString:""}},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e.warehousesDistributions!==this.props.warehousesDistributions&&this.resetOptions()}},{key:"onChangeWarehouse",value:function(e){this.props.dispatch(Me({warehouseDistributions:this.props.warehouseDistributions,warehouse:e.value}))}},{key:"onChangeQuantity",value:function(e){this.props.dispatch(Me({warehouseDistributions:this.props.warehouseDistributions,quantity:e}))}},{key:"loadOptions",value:function(){var e=Object(y.a)(w.a.mark((function e(t){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.warehousesSelectPagination.loading){e.next=2;break}return e.abrupt("return");case 2:return this.setState({warehousesSelectPagination:St({},this.state.warehousesSelectPagination,{loading:!0})}),t!==this.state.warehousesSelectPagination.searchString&&this.resetOptions(),e.next=6,H({searchString:t,page:this.state.warehousesSelectPagination.page,limit:this.state.warehousesSelectPagination.limit});case 6:return r=e.sent,this.setState({warehousesSelectPagination:St({},this.state.warehousesSelectPagination,{totalCount:r.totalCount,count:this.state.warehousesSelectPagination.count+r.items.length,page:this.state.warehousesSelectPagination.page+1,loading:!1,searchString:t})}),e.abrupt("return",{options:r.items.map((function(e){return{value:e,label:e.title}})),hasMore:0!==this.state.warehousesSelectPagination.totalCount&&this.state.warehousesSelectPagination.totalCount>this.state.warehousesSelectPagination.count});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterOptionsBySelected",value:function(e){var t=this;return e.filter((function(e){return!t.props.warehousesDistributions.find((function(t){return!!t.warehouse&&t.warehouse.id===e.value.id}))}))}},{key:"reduceSelectOptions",value:function(e,t){return[].concat(Object(x.a)(e),Object(x.a)(this.filterOptionsBySelected(t)))}},{key:"resetOptions",value:function(){this.setState({warehousesSelectPagination:St({},this.state.warehousesSelectPagination,{page:1,totalCount:0,count:0})})}},{key:"onClickRemove",value:function(){var e;this.props.dispatch((e=this.props.warehouseDistributions,function(){var t=Object(y.a)(w.a.mark((function t(r,n){var a,s,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().products.selected.warehouses.items,s=a.indexOf(e),o=n().products.selected.item,-1!==s){t.next=5;break}return t.abrupt("return",console.warn("No found warehouseDistributions for remove"));case 5:o.freeQuantity+=a[s].quantity,a.splice(s,1),r(qe(e)),r({type:fe,items:Object(x.a)(a)}),r({type:le,product:ke({},n().products.selected.item)});case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ze.a.Row,{className:"mt-3"},s.a.createElement(v.a,{sm:"4"},s.a.createElement(tt,{cacheUniq:this.props.warehousesDistributions,reduceOptions:function(t,r){return e.reduceSelectOptions(t,r)},loadOptions:function(t){return e.loadOptions(t)},onChange:function(t){return e.onChangeWarehouse(t)},value:this.props.warehouseDistributions.warehouse&&{label:this.props.warehouseDistributions.warehouse.title,value:this.props.warehouseDistributions.warehouse}})),s.a.createElement(v.a,{sm:"4"},s.a.createElement(ze.a.Control,{className:"mb-3",required:!0,placeholder:"Quantity",type:"number",min:0,disabled:!this.props.warehouseDistributions.warehouse,value:this.props.warehouseDistributions.quantity,onChange:function(t){return e.onChangeQuantity(+t.target.value)}})),s.a.createElement(v.a,{sm:"4"},s.a.createElement(Ze.a,{className:"w-100"},s.a.createElement(g.a,{variant:"danger",onClick:function(){return e.onClickRemove()}},"Remove")))))}}]),t}(a.Component);var Ct=Object(b.b)((function(e){return{warehousesDistributions:e.products.selected.warehouses.items}}))(Dt),Pt=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onClickAddWarehousesDistribution",value:function(){this.props.dispatch(function(){var e=Object(y.a)(w.a.mark((function e(t,r){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=r().products.selected.warehouses.items).push({id:S()(),warehouse:null,quantity:0,isNew:!0}),t({type:fe,items:Object(x.a)(n)});case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,(!!this.props.selectedProduct.freeQuantity||!!this.props.selectedProductWarehouses.length)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",null,"List of owned warehouses"),!!this.props.selectedProductWarehousesError&&s.a.createElement(O.a,{variant:"danger"},this.props.selectedProductWarehousesError.message),s.a.createElement("div",{style:{position:"relative"}},this.props.selectedProductWarehouses.map((function(e){return s.a.createElement(Ct,{key:e.id,warehouseDistributions:e})})),this.props.selectedProductWarehousesLoading&&s.a.createElement(Ve,null)),this.props.selectedProduct&&s.a.createElement("div",{className:"mb-3"},"Free count: ",this.props.selectedProduct.freeQuantity),!this.props.selectedProductWarehousesLoading&&s.a.createElement(g.a,{block:!0,onClick:function(){return e.onClickAddWarehousesDistribution()}},"Add to warehouse")))}}]),t}(a.Component);var Mt=Object(b.b)((function(e){return{selectedProduct:e.products.selected.item,selectedProductWarehouses:e.products.selected.warehouses.items,selectedProductWarehousesLoading:e.products.selected.warehouses.loading,selectedProductWarehousesError:e.products.selected.warehouses.error}}))(Pt),qt=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={showBeforeRemoveModal:!1},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onClickProductSave",value:function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.dispatch(Ce());case 3:this.props.selectedError||this.onProductClose();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onProductClose",value:function(){this.setState({id:null,title:"",quantity:0,showBeforeRemoveModal:!1}),this.props.dispatch(Se()),this.props.onClose()}},{key:"featchProductWarehouses",value:function(){this.props.selectedProduct&&this.props.dispatch(je())}},{key:"onClickRemoveProduct",value:function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(function(){var e=Object(y.a)(w.a.mark((function e(t,r){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:de,error:null}),t({type:pe,loading:!0}),e.next=5,ue(r().products.selected.item);case 5:return e.next=7,t(Te({warehousesDistributions:r().products.selected.warehouses.items,skipEdited:!0}));case 7:t({type:Oe,totalCount:r().products.list.pagination.totalCount-1}),t({type:me,items:Object(x.a)(r().products.list.items.filter((function(e){return e.id!==r().products.selected.item.id})))}),t({type:pe,loading:!1}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:de,error:e.t0}),t({type:pe,loading:!1});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}());case 2:this.props.selectedError||this.onProductClose();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onShowBeforeRemoveModal",value:function(){this.props.onClose(),this.setState({showBeforeRemoveModal:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement($e.a,{show:this.props.show,onHide:function(){return e.onProductClose()},onShow:function(){return e.featchProductWarehouses()}},s.a.createElement(ze.a,{onSubmit:function(t){return e.onClickProductSave(t)}},s.a.createElement($e.a.Header,{closeButton:!0},s.a.createElement($e.a.Title,null,"Product information")),s.a.createElement($e.a.Body,{style:{position:"relative"}},this.props.selectedLoading&&s.a.createElement(Ve,{full:!0}),!!this.props.selectedError&&s.a.createElement(O.a,{variant:"danger"},this.props.selectedError.message),s.a.createElement(ze.a.Group,null,s.a.createElement(ze.a.Label,null,"Product title"),s.a.createElement(ze.a.Control,{type:"text",required:!0,placeholder:"Enter product title",value:this.props.selectedProduct.title||"",onChange:function(t){return e.props.dispatch(De({title:t.target.value}))}})),s.a.createElement(ze.a.Group,null,s.a.createElement(ze.a.Label,null,"Product quantity"),s.a.createElement(ze.a.Control,{required:!0,type:"number",min:0,placeholder:"Enter product quantity",value:this.props.selectedProduct.quantity||0,onChange:function(t){return e.props.dispatch(De({quantity:+t.target.value}))}})),s.a.createElement(Mt,{quantity:this.state.quantity,onChange:function(t,r){return e.setState({warehousesDistributions:t,warehousesDistributionsToDelete:r})},onChangeQuantitySum:function(t){return e.setState({minQuantity:t})}})),s.a.createElement($e.a.Footer,null,s.a.createElement(g.a,{variant:"secondary",onClick:function(){return e.onProductClose()}},"Close"),this.props.selectedProduct.id&&s.a.createElement(g.a,{variant:"danger",onClick:function(){return e.onShowBeforeRemoveModal()}},"Remove"),s.a.createElement(g.a,{variant:"primary",type:"submit"},"Save Changes")))),s.a.createElement($e.a,{show:this.state.showBeforeRemoveModal,onHide:function(){return e.onProductClose()}},s.a.createElement($e.a.Header,{closeButton:!0},s.a.createElement($e.a.Title,null,"Question")),s.a.createElement($e.a.Body,{style:{position:"relative"}},"Are you want to remove the product? It will be removed from all warehouses."),s.a.createElement($e.a.Footer,null,s.a.createElement(g.a,{variant:"secondary",onClick:function(){return e.onProductClose()}},"Close"),s.a.createElement(g.a,{variant:"danger",onClick:function(){return e.onClickRemoveProduct()}},"Yes, remove"))))}}]),t}(a.Component);var Tt=Object(b.b)((function(e){return{selectedProduct:e.products.selected.item,selectedProductWarehouses:e.products.selected.warehouses.items,selectedLoading:e.products.selected.loading,selectedError:e.products.selected.error}}))(qt),Wt=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={showProductModal:!1},r.scrollContainer=null,r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(xe());case 2:if(!(this.scrollContainer.scrollHeight<=this.scrollContainer.clientHeight&&this.props.listItems.length<this.props.listTotalCount)){e.next=7;break}return e.next=5,this.props.dispatch(xe());case 5:e.next=2;break;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onClickProduct",value:function(e){this.props.dispatch({type:le,product:e}),this.setState({showProductModal:!0})}},{key:"onClickAddProduct",value:function(){this.setState({showProductModal:!0})}},{key:"onScrollList",value:function(e){e.scrollHeight-e.scrollTop===e.clientHeight&&this.props.dispatch(xe())}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{justifyContent:"space-between",display:"flex"},className:"my-3"},s.a.createElement("h4",null,"Products list"),s.a.createElement(g.a,{onClick:function(){return e.onClickAddProduct()}},"Add product"),s.a.createElement(Tt,{onClose:function(){return e.setState({showProductModal:!1})},show:this.state.showProductModal})),!!this.props.listError&&s.a.createElement(O.a,{variant:"danger"},this.props.listError.message),s.a.createElement("div",{style:{position:"relative"}},s.a.createElement("div",{className:"list-container",onScroll:function(t){return e.onScrollList(t.target)},ref:function(t){return e.scrollContainer=t}},s.a.createElement(E.a,{striped:!0,bordered:!0,hover:!0,className:"mb-0"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"#"),s.a.createElement("th",null,"Title"),s.a.createElement("th",null,"Free"),s.a.createElement("th",null,"Quantity"))),s.a.createElement("tbody",null,this.props.listItems.map((function(t){return s.a.createElement("tr",{key:t.id,onClick:function(){return e.onClickProduct(t)}},s.a.createElement("td",null,t.id),s.a.createElement("td",null,t.title),s.a.createElement("td",null,t.freeQuantity),s.a.createElement("td",null,t.quantity))}))))),this.props.listLoading&&s.a.createElement(Ve,{full:!0})))}}]),t}(a.Component);var Ft=Object(b.b)((function(e){return{selectedWarehouse:e.warehouses.selected.item,selectedItem:e.products.selected.item,listItems:e.products.list.items,listTotalCount:e.products.list.pagination.totalCount,listLoading:e.products.list.loading,listError:e.products.list.error}}))(Wt),It=r(33),Rt=r(86),_t=r(87);function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(r,!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var At={selected:{item:{},warehouses:{items:[],error:null,loading:!1},error:null,loading:!1,warehousesForDelete:[]},list:{items:[],error:null,loading:!1,pagination:{page:1,limit:10,totalCount:0}}},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Nt({},e,{selected:Nt({},e.selected,{item:t.product})});case pe:return Nt({},e,{selected:Nt({},e.selected,{loading:t.loading})});case de:return Nt({},e,{selected:Nt({},e.selected,{error:t.error})});case he:return Nt({},e,{selected:Nt({},e.selected,{warehousesForDelete:t.warehousesForDelete})});case fe:return Nt({},e,{selected:Nt({},e.selected,{warehouses:Nt({},e.selected.warehouses,{items:t.items})})});case ve:return Nt({},e,{selected:Nt({},e.selected,{warehouses:Nt({},e.selected.warehouses,{error:t.error})})});case be:return Nt({},e,{selected:Nt({},e.selected,{warehouses:Nt({},e.selected.warehouses,{loading:t.loading})})});case me:return Nt({},e,{list:Nt({},e.list,{items:t.items})});case ge:return Nt({},e,{list:Nt({},e.list,{pagination:Nt({},e.list.pagination,{page:t.page})})});case Oe:return Nt({},e,{list:Nt({},e.list,{pagination:Nt({},e.list.pagination,{totalCount:+t.totalCount})})});case we:return Nt({},e,{list:Nt({},e.list,{loading:t.loading})});case ye:return Nt({},e,{list:Nt({},e.list,{error:t.error})});default:return e}},Qt=Object(It.createStore)(Object(It.combineReducers)(n),Object(_t.composeWithDevTools)(Object(It.applyMiddleware)(Rt.a))),Ht=(r(140),r(141),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(b.a,{store:Qt},s.a.createElement(h.a,null,s.a.createElement(f.a,null,s.a.createElement(v.a,{className:"full-height",xs:"12",md:"6"},s.a.createElement(xt,null)),s.a.createElement(v.a,{className:"full-height",xs:"12",md:"6"},s.a.createElement(Ft,null)))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(Ht,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},89:function(e,t,r){e.exports=r(142)}},[[89,1,2]]]);
//# sourceMappingURL=main.ed042dd2.chunk.js.map