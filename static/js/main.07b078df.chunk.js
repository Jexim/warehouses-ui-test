(this["webpackJsonpwarehouses-ui-test"]=this["webpackJsonpwarehouses-ui-test"]||[]).push([[0],{118:function(e,t,r){},141:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"warehouses",(function(){return st})),r.d(n,"products",(function(){return _t}));var a=r(0),s=r.n(a),o=r(20),i=r.n(o),u=r(11),c=r(12),l=r(13),p=r(14),d=r(15),h=r(147),f=r(148),v=r(83),b=r(17),w=r(143),m=r(149),y=r(146),g=r(4),O=r.n(g),E=r(9),k=r(6),x=r(43),j=r.n(x),S="warehouses.SET_SELECTED_ITEM",D="warehouses.SET_SELECTED_LOADING",P="warehouses.SET_SELECTED_ERROR",C="warehouses.SET_SELECTED_PRODUCTS_ITEMS",M="warehouses.SET_SELECTED_PRODUCTS_FOR_MOVE",q="warehouses.SET_SELECTED_PRODUCTS_FOR_DELETE",T="warehouses.SET_SELECTED_PRODUCTS_ERROR",W="warehouses.SET_SELECTED_PRODUCTS_LOADING",F="warehouses.SET_LIST_ITEMS",R="warehouses.SET_LIST_LOADING",I="warehouses.SET_LIST_ERROR",_="warehouses.SET_LIST_PAGE",L="warehouses.SET_LIST_TOTAL_COUNT",N=r(16),A=r.n(N),B="https://warehouses-mock-api-test.herokuapp.com";function Q(e){return H.apply(this,arguments)}function H(){return(H=Object(k.a)(O.a.mark((function e(t){var r,n,a,s,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.page,n=t.limit,a=t.searchString,s=void 0===a?"":a,e.prev=1,e.next=4,A.a.get("".concat(B,"/warehouses?_page=").concat(r,"&_limit=").concat(n,"&title_like=").concat(s));case 4:return o=e.sent,e.abrupt("return",{items:o.data,totalCount:o.headers["x-total-count"]});case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function U(){return G.apply(this,arguments)}function G(){return(G=Object(k.a)(O.a.mark((function e(){var t,r,n,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.productId,e.prev=1,e.next=4,A.a.get("".concat(B,"/products/").concat(r,"/warehousesProducts?_expand=warehouse"));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function V(e){return J.apply(this,arguments)}function J(){return(J=Object(k.a)(O.a.mark((function e(t){var r,n,a,s,o,i,u,c,l,p;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,n=t.productsDistributions,e.prev=1,a=n.reduce((function(e,t){return e+t.quantity}),0),e.next=5,A.a.post("".concat(B,"/warehouses"),{title:r,productsQuantity:a});case 5:s=e.sent,o=!0,i=!1,u=void 0,e.prev=9,c=n[Symbol.iterator]();case 11:if(o=(l=c.next()).done){e.next=19;break}if(!((p=l.value).quantity>0)){e.next=16;break}return e.next=16,A.a.post("".concat(B,"/warehousesProducts"),{warehouseId:s.data.id,productId:p.product.id,quantity:p.quantity});case 16:o=!0,e.next=11;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),i=!0,u=e.t0;case 25:e.prev=25,e.prev=26,o||null==c.return||c.return();case 28:if(e.prev=28,!i){e.next=31;break}throw u;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return e.abrupt("return",s.data);case 36:throw e.prev=36,e.t1=e.catch(1),e.t1;case 39:case"end":return e.stop()}}),e,null,[[1,36],[9,21,25,33],[26,,28,32]])})))).apply(this,arguments)}function Y(e){return $.apply(this,arguments)}function $(){return($=Object(k.a)(O.a.mark((function e(t){var r,n,a,s,o,i,u,c,l,p,d,h,f,v,b,w,m,y,g,E,k,x,j,S,D,P,C,M,q,T,W,F;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.title,a=t.productsDistributions,s=t.productsForDelete,o=t.productsForMove,e.prev=1,i=a.reduce((function(e,t){return e+t.quantity}),0),e.next=5,A.a.put("".concat(B,"/warehouses/").concat(r),{title:n,productsQuantity:i});case 5:u=e.sent,c=!0,l=!1,p=void 0,e.prev=9,d=a[Symbol.iterator]();case 11:if(c=(h=d.next()).done){e.next=29;break}if(!((f=h.value).isNew&&f.quantity>0)){e.next=18;break}return e.next=16,A.a.post("".concat(B,"/warehousesProducts"),{warehouseId:u.data.id,productId:f.product.id,quantity:f.quantity});case 16:e.next=26;break;case 18:if(!f.edited||f.isNew){e.next=26;break}if(!(f.quantity>0)){e.next=24;break}return e.next=22,A.a.put("".concat(B,"/warehousesProducts/").concat(f.id),{warehouseId:u.data.id,productId:f.product.id,quantity:f.quantity});case 22:e.next=26;break;case 24:return e.next=26,A.a.delete("".concat(B,"/warehousesProducts/").concat(f.id));case 26:c=!0,e.next=11;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(9),l=!0,p=e.t0;case 35:e.prev=35,e.prev=36,c||null==d.return||d.return();case 38:if(e.prev=38,!l){e.next=41;break}throw p;case 41:return e.finish(38);case 42:return e.finish(35);case 43:v=!0,b=!1,w=void 0,e.prev=46,m=o[Symbol.iterator]();case 48:if(v=(y=m.next()).done){e.next=88;break}g=y.value,E=!0,k=!1,x=void 0,e.prev=53,j=g.warehousesDistributions[Symbol.iterator]();case 55:if(E=(S=j.next()).done){e.next=71;break}if(!((D=S.value).quantity>0)){e.next=68;break}return e.next=60,A.a.get("".concat(B,"/warehousesProducts?productId=").concat(g.productDistributions.product.id,"&warehouseId=").concat(D.warehouse.id));case 60:if(!(P=e.sent).data.length){e.next=66;break}return e.next=64,A.a.put("".concat(B,"/warehousesProducts/").concat(P.data[0].id),{warehouseId:D.warehouse.id,productId:g.productDistributions.product.id,quantity:P.data[0].quantity+D.quantity});case 64:e.next=68;break;case 66:return e.next=68,A.a.post("".concat(B,"/warehousesProducts"),{warehouseId:D.warehouse.id,productId:g.productDistributions.product.id,quantity:D.quantity});case 68:E=!0,e.next=55;break;case 71:e.next=77;break;case 73:e.prev=73,e.t1=e.catch(53),k=!0,x=e.t1;case 77:e.prev=77,e.prev=78,E||null==j.return||j.return();case 80:if(e.prev=80,!k){e.next=83;break}throw x;case 83:return e.finish(80);case 84:return e.finish(77);case 85:v=!0,e.next=48;break;case 88:e.next=94;break;case 90:e.prev=90,e.t2=e.catch(46),b=!0,w=e.t2;case 94:e.prev=94,e.prev=95,v||null==m.return||m.return();case 97:if(e.prev=97,!b){e.next=100;break}throw w;case 100:return e.finish(97);case 101:return e.finish(94);case 102:C=!0,M=!1,q=void 0,e.prev=105,T=s[Symbol.iterator]();case 107:if(C=(W=T.next()).done){e.next=114;break}return F=W.value,e.next=111,A.a.delete("".concat(B,"/warehousesProducts/").concat(F.id));case 111:C=!0,e.next=107;break;case 114:e.next=120;break;case 116:e.prev=116,e.t3=e.catch(105),M=!0,q=e.t3;case 120:e.prev=120,e.prev=121,C||null==T.return||T.return();case 123:if(e.prev=123,!M){e.next=126;break}throw q;case 126:return e.finish(123);case 127:return e.finish(120);case 128:return e.abrupt("return",u.data);case 131:throw e.prev=131,e.t4=e.catch(1),e.t4;case 134:case"end":return e.stop()}}),e,null,[[1,131],[9,31,35,43],[36,,38,42],[46,90,94,102],[53,73,77,85],[78,,80,84],[95,,97,101],[105,116,120,128],[121,,123,127]])})))).apply(this,arguments)}function z(e){return K.apply(this,arguments)}function K(){return(K=Object(k.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.delete("".concat(B,"/warehouses/").concat(t.id));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var X="https://warehouses-mock-api-test.herokuapp.com";function Z(){return ee.apply(this,arguments)}function ee(){return(ee=Object(k.a)(O.a.mark((function e(){var t,r,n,a,s,o,i=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},r=t.page,n=t.limit,a=t.searchString,s=void 0===a?"":a,e.prev=1,e.next=4,A.a.get("".concat(X,"/products?_page=").concat(r,"&_limit=").concat(n,"&title_like=").concat(s));case 4:return o=e.sent,e.abrupt("return",{items:o.data,totalCount:o.headers["x-total-count"]});case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function te(){return re.apply(this,arguments)}function re(){return(re=Object(k.a)(O.a.mark((function e(){var t,r,n,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.warehouseId,e.prev=1,e.next=4,A.a.get("".concat(X,"/warehouses/").concat(r,"/warehousesProducts?_expand=product"));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(k.a)(O.a.mark((function e(t){var r,n,a,s,o,i,u,c,l,p,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,n=t.quantity,a=t.warehousesDistributions,e.prev=1,s=n-a.reduce((function(e,t){return e+t.quantity}),0),e.next=5,A.a.post("".concat(X,"/products"),{title:r,quantity:n,freeQuantity:s});case 5:o=e.sent,i=!0,u=!1,c=void 0,e.prev=9,l=a[Symbol.iterator]();case 11:if(i=(p=l.next()).done){e.next=19;break}if(!((d=p.value).quantity>0)){e.next=16;break}return e.next=16,A.a.post("".concat(X,"/warehousesProducts"),{warehouseId:d.warehouse.id,productId:o.data.id,quantity:d.quantity});case 16:i=!0,e.next=11;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),u=!0,c=e.t0;case 25:e.prev=25,e.prev=26,i||null==l.return||l.return();case 28:if(e.prev=28,!u){e.next=31;break}throw c;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return e.abrupt("return",o.data);case 36:throw e.prev=36,e.t1=e.catch(1),e.t1;case 39:case"end":return e.stop()}}),e,null,[[1,36],[9,21,25,33],[26,,28,32]])})))).apply(this,arguments)}function se(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(k.a)(O.a.mark((function e(t){var r,n,a,s,o,i,u,c,l,p,d,h,f,v,b,w,m,y,g;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.title,a=t.quantity,s=t.warehousesDistributions,o=t.warehousesForDelete,e.prev=1,i=a-s.reduce((function(e,t){return e+t.quantity}),0),e.next=5,A.a.put("".concat(X,"/products/").concat(r),{title:n,quantity:a,freeQuantity:i});case 5:u=e.sent,c=!0,l=!1,p=void 0,e.prev=9,d=s[Symbol.iterator]();case 11:if(c=(h=d.next()).done){e.next=29;break}if(!((f=h.value).isNew&&f.quantity>0)){e.next=18;break}return e.next=16,A.a.post("".concat(X,"/warehousesProducts"),{warehouseId:f.warehouse.id,productId:r,quantity:f.quantity});case 16:e.next=26;break;case 18:if(!f.edited||f.isNew){e.next=26;break}if(!(f.quantity>0)){e.next=24;break}return e.next=22,A.a.put("".concat(X,"/warehousesProducts/").concat(f.id),{warehouseId:f.warehouse.id,productId:r,quantity:f.quantity});case 22:e.next=26;break;case 24:return e.next=26,A.a.delete("".concat(X,"/warehousesProducts/").concat(f.id));case 26:c=!0,e.next=11;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(9),l=!0,p=e.t0;case 35:e.prev=35,e.prev=36,c||null==d.return||d.return();case 38:if(e.prev=38,!l){e.next=41;break}throw p;case 41:return e.finish(38);case 42:return e.finish(35);case 43:v=!0,b=!1,w=void 0,e.prev=46,m=o[Symbol.iterator]();case 48:if(v=(y=m.next()).done){e.next=55;break}return g=y.value,e.next=52,A.a.delete("".concat(X,"/warehousesProducts/").concat(g.id));case 52:v=!0,e.next=48;break;case 55:e.next=61;break;case 57:e.prev=57,e.t1=e.catch(46),b=!0,w=e.t1;case 61:e.prev=61,e.prev=62,v||null==m.return||m.return();case 64:if(e.prev=64,!b){e.next=67;break}throw w;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return e.abrupt("return",u.data);case 72:throw e.prev=72,e.t2=e.catch(1),e.t2;case 75:case"end":return e.stop()}}),e,null,[[1,72],[9,31,35,43],[36,,38,42],[46,57,61,69],[62,,64,68]])})))).apply(this,arguments)}function ie(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(k.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.delete("".concat(X,"/products/").concat(t.id));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var ce=r(2),le="products.SET_SELECTED_ITEM",pe="products.SET_SELECTED_LOADING",de="products.SET_SELECTED_ERROR",he="products.SET_SELECTED_WAREHOUSES_FOR_DELETE",fe="products.SET_SELECTED_WAREHOUSES_ITEMS",ve="products.SET_SELECTED_WAREHOUSES_ERROR",be="products.SET_SELECTED_WAREHOUSES_LOADING",we="products.SET_LIST_ITEMS",me="products.SET_LIST_LOADING",ye="products.SET_LIST_ERROR",ge="products.SET_LIST_PAGE",Oe="products.SET_LIST_TOTAL_COUNT";function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(r,!0).forEach((function(t){Object(ce.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(){return function(){var e=Object(k.a)(O.a.mark((function e(t,r){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r(),t({type:ve,error:null}),t({type:be,loading:!0}),e.next=6,U({productId:n.products.selected.item.id});case 6:a=e.sent,t({type:fe,items:[].concat(Object(E.a)(n.products.selected.warehouses.items),Object(E.a)(a))}),t({type:be,loading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:ve,error:e.t0}),t({type:be,loading:!1});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()}function je(){return function(e){e({type:le,product:{}}),e({type:de,error:null}),e({type:pe,loading:!1}),e({type:fe,items:[]}),e({type:ve,error:null}),e({type:be,loading:!1}),e({type:he,warehousesForDelete:[]})}}function Se(e){var t=e.title,r=e.quantity;return function(){var e=Object(k.a)(O.a.mark((function e(n,a){var s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s={},t&&(s.title=t),r>=0&&(s.quantity=r,s.freeQuantity=r-a().products.selected.warehouses.items.reduce((function(e,t){return e+t.quantity}),0)),n({type:le,product:ke({},a().products.selected.item,{},s)});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function De(e){return function(){var t=Object(k.a)(O.a.mark((function t(r,n){var a,s,o,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r({type:de,error:null}),r({type:pe,loading:!0}),-1===n().products.selected.warehouses.items.findIndex((function(e){return!e.warehouse}))){t.next=5;break}throw new Error("Not all warehouse are selected, check the fields");case 5:if(a=n().products.selected.item.id,s=n().products.list.items,!a){t.next=15;break}return i=s.findIndex((function(e){return e.id===a})),t.next=11,se(ke({},n().products.selected.item,{warehousesDistributions:n().products.selected.warehouses.items,warehousesForDelete:n().products.selected.warehousesForDelete}));case 11:o=t.sent,-1!==i&&(s[i]=o),t.next=19;break;case 15:return t.next=17,ne(ke({},n().products.selected.item,{warehousesDistributions:n().products.selected.warehouses.items,warehousesForDelete:n().products.selected.warehousesForDelete}));case 17:o=t.sent,n().products.list.pagination.totalCount===n().products.list.items.length&&(s.push(o),r({type:Oe,totalCount:n().products.list.pagination.totalCount+1}));case 19:if(e){t.next=22;break}return t.next=22,r(qe(n().products.selected.warehouses.items));case 22:r({type:we,items:Object(E.a)(s)}),r({type:pe,loading:!1}),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(0),r({type:de,error:t.t0}),r({type:pe,loading:!1});case 30:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(e,r){return t.apply(this,arguments)}}()}function Pe(e){return function(){var t=Object(k.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:le,product:e}),t.next=3,r(xe());case 3:return t.next=5,r(De(!0));case 5:r(je());case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function Ce(e){var t=e.warehouseDistributions,r=e.warehouse,n=e.quantity;return function(){var e=Object(k.a)(O.a.mark((function e(a,s){var o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=s().products.selected.item,r&&(t.firstWarehouse||(t.firstWarehouse=t.warehouse),t.warehouse=r),n>=0&&o.freeQuantity+t.quantity>=n&&(t.quantity=n,o.freeQuantity=o.quantity-s().products.selected.warehouses.items.reduce((function(e,t){return e+t.quantity}),0)),t.edited=!0,a({type:fe,items:Object(E.a)(s().products.selected.warehouses.items)}),a({type:le,product:ke({},s().products.selected.item)});case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function Me(e){return function(){var t=Object(k.a)(O.a.mark((function t(r,n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isNew||((a=n().products.selected.warehousesForDelete).push(e),r({type:he,warehousesForDelete:Object(E.a)(a)}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function qe(e){return function(){var t=Object(k.a)(O.a.mark((function t(r,n){var a,s,o,i,u,c,l,p,d,h,f,v;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=!0,s=!1,o=void 0,t.prev=3,i=e[Symbol.iterator]();case 5:if(a=(u=i.next()).done){t.next=16;break}if(!(c=u.value).edited){t.next=13;break}return t.next=10,r(Ie(c.warehouse));case 10:if(!c.firstWarehouse){t.next=13;break}return t.next=13,r(Ie(c.firstWarehouse));case 13:a=!0,t.next=5;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(3),s=!0,o=t.t0;case 22:t.prev=22,t.prev=23,a||null==i.return||i.return();case 25:if(t.prev=25,!s){t.next=28;break}throw o;case 28:return t.finish(25);case 29:return t.finish(22);case 30:l=!0,p=!1,d=void 0,t.prev=33,h=n().products.selected.warehousesForDelete[Symbol.iterator]();case 35:if(l=(f=h.next()).done){t.next=42;break}return v=f.value,t.next=39,r(Ie(v.warehouse));case 39:l=!0,t.next=35;break;case 42:t.next=48;break;case 44:t.prev=44,t.t1=t.catch(33),p=!0,d=t.t1;case 48:t.prev=48,t.prev=49,l||null==h.return||h.return();case 51:if(t.prev=51,!p){t.next=54;break}throw d;case 54:return t.finish(51);case 55:return t.finish(48);case 56:case"end":return t.stop()}}),t,null,[[3,18,22,30],[23,,25,29],[33,44,48,56],[49,,51,55]])})));return function(e,r){return t.apply(this,arguments)}}()}function Te(){return function(){var e=Object(k.a)(O.a.mark((function e(t,r){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r(),t({type:T,error:null}),t({type:W,loading:!0}),e.next=6,te({warehouseId:n.warehouses.selected.item.id});case 6:a=e.sent,t({type:C,items:[].concat(Object(E.a)(n.warehouses.selected.products.items),Object(E.a)(a))}),t({type:W,loading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:T,error:e.t0}),t({type:W,loading:!1});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()}function We(){return function(e,t){e({type:S,warehouse:null}),e({type:P,error:null}),e({type:D,loading:!1}),e({type:C,items:[]}),e({type:T,error:null}),e({type:W,loading:!1}),e({type:M,productsForMove:[]}),e({type:q,productsForDelete:[]})}}function Fe(e){var t=e.title;return function(){var e=Object(k.a)(O.a.mark((function e(r,n){var a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r({type:P,error:null}),r({type:D,loading:!0}),-1===(a=n().warehouses.selected.products.items).findIndex((function(e){return!e.product}))){e.next=6;break}throw new Error("Not all products are selected, check the fields");case 6:return e.next=8,V({title:t,productsDistributions:a});case 8:return s=e.sent,n().warehouses.list.pagination.totalCount===n().warehouses.list.items.length&&r({type:F,items:[].concat(Object(E.a)(n().warehouses.list.items),[s])}),e.next=12,r(Qe({productsDistributions:a}));case 12:r({type:L,totalCount:n().warehouses.list.pagination.totalCount+1}),r({type:D,loading:!1}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),r({type:P,error:e.t0}),r({type:D,loading:!1});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,r){return e.apply(this,arguments)}}()}function Re(e,t){var r=e.title;return function(){var e=Object(k.a)(O.a.mark((function e(n,a){var s,o,i,u,c,l,p;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n({type:P,error:null}),n({type:D,loading:!0}),-1===a().warehouses.selected.products.items.findIndex((function(e){return!e.product}))){e.next=5;break}throw new Error("Not all products are selected, check the fields");case 5:if(-1===a().warehouses.selected.productsForMove.findIndex((function(e){return-1!==e.warehousesDistributions.findIndex((function(e){return!e.warehouse}))}))){e.next=7;break}throw new Error("Not all warehouses are selected, check the fields");case 7:return s=a().warehouses.selected.item.id,o=a().warehouses.list.items,i=a().warehouses.selected.products.items,u=a().warehouses.selected.productsForDelete,c=a().warehouses.selected.productsForMove,l=o.findIndex((function(e){return e.id===s})),e.next=15,Y({id:s,title:r,productsDistributions:i,productsForDelete:u,productsForMove:c});case 15:if(p=e.sent,o[l]=p,t){e.next=22;break}return e.next=20,n(Qe({productsDistributions:i,productsForDelete:u}));case 20:return e.next=22,n(He({productsForMove:c}));case 22:n({type:F,items:Object(E.a)(o)}),n({type:D,loading:!1}),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),n({type:P,error:e.t0}),n({type:D,loading:!1});case 30:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t,r){return e.apply(this,arguments)}}()}function Ie(e){return function(){var t=Object(k.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:S,warehouse:e}),t.next=3,r(Te());case 3:return t.next=5,r(Re({title:e.title},!0));case 5:r(We());case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function _e(e){var t=e.warehouseDistributions,r=e.warehouse,n=e.quantity;return function(){var e=Object(k.a)(O.a.mark((function e(a,s){var o,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=s().warehouses.selected.productsForMove,i=o.findIndex((function(e){return e.productDistributions===t.productDistributions})),r&&(t.warehouse=r),n>=0&&(t.productDistributions.quantity+t.quantity-n>=0&&(t.productDistributions.quantity-=n-t.quantity,t.quantity=n),t.productDistributions.moveQuantity=o[i].warehousesDistributions.reduce((function(e,t){return e+t.quantity}),0)),o[i].warehousesDistributions=Object(E.a)(o[i].warehousesDistributions),a({type:M,productsForMove:Object(E.a)(s().warehouses.selected.productsForMove)}),a({type:C,items:Object(E.a)(s().warehouses.selected.products.items)});case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function Le(e){return function(){var t=Object(k.a)(O.a.mark((function t(r,n){var a,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n().warehouses.selected.productsForMove,s=a.findIndex((function(t){return t.productDistributions===e.productDistributions})),e.productDistributions.moveQuantity=a[s].warehousesDistributions.reduce((function(e,t){return e+t.quantity}),0),a[s].warehousesDistributions=Object(E.a)(a[s].warehousesDistributions),r({type:M,productsForMove:Object(E.a)(n().warehouses.selected.productsForMove)});case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function Ne(e){return function(){var t=Object(k.a)(O.a.mark((function t(r,n){var a,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n().warehouses.selected.productsForMove,s=a.findIndex((function(t){return t.productDistributions===e})),e.moveQuantity=0,-1!==s&&(e.quantity+=n().warehouses.selected.productsForMove[s].warehousesDistributions.reduce((function(e,t){return e+t.quantity}),0),a.splice(s,1)),r({type:M,productsForMove:Object(E.a)(a)});case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function Ae(e){var t=e.productDistributions,r=e.product,n=e.quantity;return function(){var e=Object(k.a)(O.a.mark((function e(a,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&(t.firstProduct||(t.firstProduct=t.product),t.product=r),n>=0&&t.product.freeQuantity+t.quantity-n>=0&&(t.product.freeQuantity-=n-t.quantity,t.quantity=n),t.edited=!0,a({type:C,items:Object(E.a)(s().warehouses.selected.products.items)});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function Be(e){return function(){var t=Object(k.a)(O.a.mark((function t(r,n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isNew||((a=n().warehouses.selected.productsForDelete).push(e),r({type:q,productsForDelete:Object(E.a)(a)}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}function Qe(e){var t=e.productsDistributions,r=e.productsForDelete,n=void 0===r?[]:r;return function(){var e=Object(k.a)(O.a.mark((function e(r){var a,s,o,i,u,c,l,p,d,h,f,v;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!0,s=!1,o=void 0,e.prev=3,i=t[Symbol.iterator]();case 5:if(a=(u=i.next()).done){e.next=16;break}if(!(c=u.value).edited){e.next=13;break}return e.next=10,r(Pe(c.product));case 10:if(!c.firstProduct){e.next=13;break}return e.next=13,r(Pe(c.firstProduct));case 13:a=!0,e.next=5;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),s=!0,o=e.t0;case 22:e.prev=22,e.prev=23,a||null==i.return||i.return();case 25:if(e.prev=25,!s){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(22);case 30:l=!0,p=!1,d=void 0,e.prev=33,h=n[Symbol.iterator]();case 35:if(l=(f=h.next()).done){e.next=42;break}return v=f.value,e.next=39,r(Pe(v.product));case 39:l=!0,e.next=35;break;case 42:e.next=48;break;case 44:e.prev=44,e.t1=e.catch(33),p=!0,d=e.t1;case 48:e.prev=48,e.prev=49,l||null==h.return||h.return();case 51:if(e.prev=51,!p){e.next=54;break}throw d;case 54:return e.finish(51);case 55:return e.finish(48);case 56:case"end":return e.stop()}}),e,null,[[3,18,22,30],[23,,25,29],[33,44,48,56],[49,,51,55]])})));return function(t){return e.apply(this,arguments)}}()}function He(e){var t=e.productsForMove;return function(){var e=Object(k.a)(O.a.mark((function e(r,n){var a,s,o,i,u,c,l,p,d,h,f,v,b;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n().warehouses.list.items,s=!0,o=!1,i=void 0,e.prev=4,u=t[Symbol.iterator]();case 6:if(s=(c=u.next()).done){e.next=31;break}for(l=c.value,p=!0,d=!1,h=void 0,e.prev=11,f=function(){var e=b.value,t=a.findIndex((function(t){return t.id===e.warehouse.id}));-1!==t&&(a[t].productsQuantity+=e.quantity)},v=l.warehousesDistributions[Symbol.iterator]();!(p=(b=v.next()).done);p=!0)f();e.next=20;break;case 16:e.prev=16,e.t0=e.catch(11),d=!0,h=e.t0;case 20:e.prev=20,e.prev=21,p||null==v.return||v.return();case 23:if(e.prev=23,!d){e.next=26;break}throw h;case 26:return e.finish(23);case 27:return e.finish(20);case 28:s=!0,e.next=6;break;case 31:e.next=37;break;case 33:e.prev=33,e.t1=e.catch(4),o=!0,i=e.t1;case 37:e.prev=37,e.prev=38,s||null==u.return||u.return();case 40:if(e.prev=40,!o){e.next=43;break}throw i;case 43:return e.finish(40);case 44:return e.finish(37);case 45:r({type:F,items:Object(E.a)(a)});case 46:case"end":return e.stop()}}),e,null,[[4,33,37,45],[11,16,20,28],[21,,23,27],[38,,40,44]])})));return function(t,r){return e.apply(this,arguments)}}()}r(118);function Ue(e){var t=e.full;return s.a.createElement("div",{className:"loader-container",style:t&&{position:"absolute"}},s.a.createElement("div",{className:"lds-hourglass"}))}var Ge=r(151),Ve=r(150),Je=r(144),Ye=r(82),$e=r(145),ze=r(88);function Ke(e){return s.a.createElement("div",{style:{position:"relative"}},s.a.createElement(ze.a,e),!!e.disabled&&s.a.createElement("div",{style:{backgroundColor:"rgba(0,0,0,0.05)",position:"absolute",top:0,bottom:0,left:0,right:0,borderRadius:3}}))}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(r,!0).forEach((function(t){Object(ce.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var et=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={warehousesSelectPagination:{page:1,limit:10,totalCount:0,count:0,loading:!1,searchString:""}},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e.warehousesDistributions!==this.props.warehousesDistributions&&this.resetOptions()}},{key:"onChangeWarehouse",value:function(e){this.props.dispatch(_e({warehouseDistributions:this.props.productForMoveItem,warehouse:e.value}))}},{key:"onChangeQuantity",value:function(e){this.props.dispatch(_e({warehouseDistributions:this.props.productForMoveItem,quantity:e}))}},{key:"onClickRemove",value:function(){var e;this.props.dispatch((e=this.props.productForMoveItem,function(){var t=Object(k.a)(O.a.mark((function t(r,n){var a,s,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().warehouses.selected.productsForMove,-1!==(s=a.findIndex((function(t){return t.productDistributions===e.productDistributions})))){t.next=4;break}return t.abrupt("return",console.warn("No found productDistributions for remove"));case 4:if(-1!==(o=a[s].warehousesDistributions.indexOf(e))){t.next=7;break}return t.abrupt("return",console.warn("No found warehousesDistributions for remove"));case 7:a[s].warehousesDistributions.splice(o,1),a[s].warehousesDistributions=Object(E.a)(a[s].warehousesDistributions),e.productDistributions.quantity+=e.quantity,r(Le(e)),r({type:M,productsForMove:Object(E.a)(a)}),r({type:C,items:Object(E.a)(n().warehouses.selected.products.items)});case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()))}},{key:"loadOptions",value:function(){var e=Object(k.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.warehousesSelectPagination.loading){e.next=2;break}return e.abrupt("return");case 2:return this.setState({warehousesSelectPagination:Ze({},this.state.warehousesSelectPagination,{loading:!0})}),t!==this.state.warehousesSelectPagination.searchString&&this.resetOptions(),e.next=6,Q({searchString:t,page:this.state.warehousesSelectPagination.page,limit:this.state.warehousesSelectPagination.limit});case 6:return r=e.sent,this.setState({warehousesSelectPagination:Ze({},this.state.warehousesSelectPagination,{totalCount:r.totalCount,count:this.state.warehousesSelectPagination.count+r.items.length,page:this.state.warehousesSelectPagination.page+1,loading:!1,searchString:t})}),e.abrupt("return",{options:r.items.map((function(e){return{value:e,label:e.title}})),hasMore:0!==this.state.warehousesSelectPagination.totalCount&&this.state.warehousesSelectPagination.totalCount>this.state.warehousesSelectPagination.count});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterOptionsBySelected",value:function(e){var t=this;return e.filter((function(e){return t.props.selectedWarehouse.id!==e.value.id&&!t.props.warehousesDistributions.find((function(t){return!!t.warehouse&&t.warehouse.id===e.value.id}))}))}},{key:"reduceOptions",value:function(e,t){return[].concat(Object(E.a)(e),Object(E.a)(this.filterOptionsBySelected(t)))}},{key:"resetOptions",value:function(){this.setState({warehousesSelectPagination:Ze({},this.state.warehousesSelectPagination,{cacheVersion:this.state.warehousesSelectPagination.cacheVersion+1,page:1,totalCount:0,count:0})})}},{key:"render",value:function(){var e=this;return s.a.createElement(Ve.a.Row,{className:"py-3 mb-3",style:{backgroundColor:"#ddd",borderRadius:3}},s.a.createElement(v.a,null,s.a.createElement(Ke,{cacheUniq:this.props.warehousesDistributions,reduceOptions:function(t,r){return e.reduceOptions(t,r)},loadOptions:function(t){return e.loadOptions(t)},onChange:function(t){return e.onChangeWarehouse(t)}})),s.a.createElement(v.a,null,s.a.createElement(Ve.a.Control,{required:!0,placeholder:"Quantity",type:"number",min:0,value:this.props.productForMoveItem.quantity,disabled:!this.props.productForMoveItem.warehouse,onChange:function(t){return e.onChangeQuantity(+t.target.value)}})),s.a.createElement(v.a,null,s.a.createElement(w.a,{block:!0,variant:"danger",onClick:function(){return e.onClickRemove()},style:{width:160}},"Remove")))}}]),t}(a.Component);var tt=Object(b.b)((function(e){return{selectedWarehouse:e.warehouses.selected.item}}))(et);function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(r,!0).forEach((function(t){Object(ce.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var at={selected:{item:null,products:{items:[],error:null,loading:!1},error:null,loading:!1,productsForDelete:[],productsForMove:[]},list:{items:[],error:null,loading:!1,pagination:{page:1,limit:20,totalCount:0}}},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return nt({},e,{selected:nt({},e.selected,{item:t.warehouse})});case M:return nt({},e,{selected:nt({},e.selected,{productsForMove:t.productsForMove})});case q:return nt({},e,{selected:nt({},e.selected,{productsForDelete:t.productsForDelete})});case D:return nt({},e,{selected:nt({},e.selected,{loading:t.loading})});case P:return nt({},e,{selected:nt({},e.selected,{error:t.error})});case C:return nt({},e,{selected:nt({},e.selected,{products:nt({},e.selected.products,{items:t.items})})});case T:return nt({},e,{selected:nt({},e.selected,{products:nt({},e.selected.products,{error:t.error})})});case W:return nt({},e,{selected:nt({},e.selected,{products:nt({},e.selected.products,{loading:t.loading})})});case F:return nt({},e,{list:nt({},e.list,{items:t.items})});case _:return nt({},e,{list:nt({},e.list,{pagination:nt({},e.list.pagination,{page:t.page})})});case L:return nt({},e,{list:nt({},e.list,{pagination:nt({},e.list.pagination,{totalCount:+t.totalCount})})});case R:return nt({},e,{list:nt({},e.list,{loading:t.loading})});case I:return nt({},e,{list:nt({},e.list,{error:t.error})});default:return e}};function ot(e,t){var r=e.warehouses.selected.productsForMove.findIndex((function(e){return e.productDistributions===t}));return-1!==r?e.warehouses.selected.productsForMove[r].warehousesDistributions:[]}var it=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onClickAddProductsMove",value:function(){var e;this.props.dispatch((e=this.props.productDistributions,function(){var t=Object(k.a)(O.a.mark((function t(r,n){var a,s,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n().warehouses.selected.productsForMove,s=a.findIndex((function(t){return t.productDistributions===e})),o={id:j()(),warehouse:null,quantity:0,productDistributions:e},-1===s?a.push({id:j()(),productDistributions:e,warehousesDistributions:[o]}):Array.isArray(a[s].warehousesDistributions)?a[s].warehousesDistributions=[].concat(Object(E.a)(a[s].warehousesDistributions),[o]):a[s].warehousesDistributions=[o],e.quantity-=o.quantity,e.edited=!0,r(Le(o)),r({type:M,productsForMove:Object(E.a)(a)}),r({type:C,items:Object(E.a)(n().warehouses.selected.products.items)});case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{position:"relative"}},this.props.warehousesDistributions.map((function(t){return s.a.createElement(tt,{key:t.id,productForMoveItem:t,warehousesDistributions:e.props.warehousesDistributions})}))),!this.props.productDistributions.quantity<=0&&s.a.createElement(w.a,{block:!0,onClick:function(){return e.onClickAddProductsMove()}},"Add new move"))}}]),t}(a.Component);var ut=Object(b.b)((function(e,t){return{warehousesDistributions:ot(e,t.productDistributions),productsForMove:e.warehouses.selected.productsForMove}}))(it);function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(r,!0).forEach((function(t){Object(ce.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pt=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={productsSelectPagination:{page:1,limit:10,totalCount:0,count:0,loading:!1,searchString:""},showMove:!1},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e.productsDistributions!==this.props.productsDistributions&&this.resetOptions()}},{key:"onChangeProduct",value:function(e){this.props.dispatch(Ae({productDistributions:this.props.productDistributions,product:e.value}))}},{key:"onChangeQuantity",value:function(e){this.props.dispatch(Ae({productDistributions:this.props.productDistributions,quantity:e}))}},{key:"loadOptions",value:function(){var e=Object(k.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.productsSelectPagination.loading){e.next=2;break}return e.abrupt("return");case 2:return this.setState({productsSelectPagination:lt({},this.state.productsSelectPagination,{loading:!0})}),t!==this.state.productsSelectPagination.searchString&&this.resetOptions(),e.next=6,Z({searchString:t,page:this.state.productsSelectPagination.page,limit:this.state.productsSelectPagination.limit});case 6:return r=e.sent,this.setState({productsSelectPagination:lt({},this.state.productsSelectPagination,{totalCount:r.totalCount,count:this.state.productsSelectPagination.count+r.items.length,page:this.state.productsSelectPagination.page+1,loading:!1,searchString:t})}),e.abrupt("return",{options:r.items.map((function(e){return{value:e,label:e.title}})),hasMore:0!==this.state.productsSelectPagination.totalCount&&this.state.productsSelectPagination.totalCount>this.state.productsSelectPagination.count});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterOptionsBySelected",value:function(e){var t=this;return e.filter((function(e){return!t.props.productsDistributions.find((function(t){return!!t.product&&t.product.id===e.value.id}))}))}},{key:"reduceSelectOptions",value:function(e,t){return[].concat(Object(E.a)(e),Object(E.a)(this.filterOptionsBySelected(t)))}},{key:"resetOptions",value:function(){this.setState({productsSelectPagination:lt({},this.state.productsSelectPagination,{cacheVersion:this.state.productsSelectPagination.cacheVersion+1,page:1,totalCount:0,count:0})})}},{key:"onClickRemove",value:function(){var e;this.props.dispatch(Ne(this.props.productDistributions)),this.props.dispatch((e=this.props.productDistributions,function(){var t=Object(k.a)(O.a.mark((function t(r,n){var a,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().warehouses.selected.products.items,-1!==(s=a.indexOf(e))){t.next=4;break}return t.abrupt("return",console.warn("No found productDistributions for remove"));case 4:a.splice(s,1),r(Be(e)),r({type:C,items:Object(E.a)(a)});case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()))}},{key:"onClickMove",value:function(){this.state.showMove&&this.props.dispatch(Ne(this.props.productDistributions)),this.setState({showMove:!this.state.showMove})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ve.a.Row,{className:"my-3"},s.a.createElement(v.a,null,s.a.createElement(Ke,{disabled:this.state.showMove||this.props.onlyMove||!this.props.productDistributions.isNew,cacheUniq:this.props.productsDistributions,reduceOptions:function(t,r){return e.reduceSelectOptions(t,r)},loadOptions:function(t){return e.loadOptions(t)},onChange:function(t){return e.onChangeProduct(t)},value:this.props.productDistributions.product&&{label:this.props.productDistributions.product.title,value:this.props.productDistributions.product}})),s.a.createElement(v.a,null,s.a.createElement(Je.a,{className:"mb-3"},s.a.createElement(Ye.a,{placeholder:"Quantity",type:"number",min:0,value:this.props.productDistributions.quantity,disabled:this.state.showMove||this.props.onlyMove||!this.props.productDistributions.product,onChange:function(t){return e.onChangeQuantity(+t.target.value)},"aria-describedby":"free-quantity"}),this.props.productDistributions.product&&s.a.createElement(Je.a.Append,null,s.a.createElement(Je.a.Text,{id:"free-quantity"},this.props.productDistributions.product.freeQuantity)))),s.a.createElement(v.a,null,s.a.createElement($e.a,{style:{width:160}},!this.props.onlyMove&&s.a.createElement(w.a,{variant:"danger",onClick:function(){return e.onClickRemove()}},"Remove"),this.props.selectedWarehouse&&!this.props.productDistributions.isNew&&s.a.createElement(w.a,{variant:"info",onClick:function(){return e.onClickMove()},active:this.state.showMove},"Move")))),this.state.showMove&&s.a.createElement(ut,{productDistributions:this.props.productDistributions}))}}]),t}(a.Component);var dt=Object(b.b)((function(e){return{selectedWarehouse:e.warehouses.selected.item,productsDistributions:e.warehouses.selected.products.items}}))(pt),ht=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onClickAddProductDistribution",value:function(){this.props.dispatch(function(){var e=Object(k.a)(O.a.mark((function e(t,r){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=r().warehouses.selected.products.items).push({id:j()(),product:null,quantity:0,isNew:!0}),t({type:C,items:Object(E.a)(n)});case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",null,"List of owned products"),!!this.props.selectedWarehouseError&&s.a.createElement(m.a,{variant:"danger"},this.props.selectedWarehouseError.message),s.a.createElement("div",null,this.props.selectedWarehouseProducts.map((function(t){return s.a.createElement(dt,{key:t.id,productDistributions:t,onlyMove:e.props.onlyMove})})),this.props.selectedWarehouseLoading&&s.a.createElement(Ue,null)),!this.props.selectedWarehouseLoading&&!this.props.onlyMove&&s.a.createElement(w.a,{block:!0,className:"mt-3",onClick:function(){return e.onClickAddProductDistribution()}},"Add product"))}}]),t}(a.Component);var ft=Object(b.b)((function(e){return{selectedWarehouseProducts:e.warehouses.selected.products.items,selectedWarehouseLoading:e.warehouses.selected.products.loading,selectedWarehouseError:e.warehouses.selected.products.error}}))(ht);function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(r,!0).forEach((function(t){Object(ce.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wt=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={title:"",showBeforeRemoveModal:!1,showMoveBeforeRemoveModal:!1},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.selectedWarehouse!==e.selectedWarehouse&&(this.props.selectedWarehouse?this.setState(bt({},this.props.selectedWarehouse)):this.setState({title:""}))}},{key:"onClickWarehouseSave",value:function(){var e=Object(k.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.props.selectedWarehouse){e.next=6;break}return e.next=4,this.props.dispatch(Re(bt({},this.state)));case 4:e.next=8;break;case 6:return e.next=8,this.props.dispatch(Fe(bt({},this.state)));case 8:this.props.selectedError||this.onWarehouseClose();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onWarehouseClose",value:function(){this.setState({id:null,title:"",quantity:0,showBeforeRemoveModal:!1,showMoveBeforeRemoveModal:!1}),this.props.dispatch(We()),this.props.onClose()}},{key:"featchWarehouseProducts",value:function(){this.props.selectedWarehouse&&this.props.dispatch(Te())}},{key:"onClickRemoveWarehouse",value:function(){var e=Object(k.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(function(){var e=Object(k.a)(O.a.mark((function e(t,r){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:P,error:null}),t({type:D,loading:!0}),e.next=5,z(r().warehouses.selected.item);case 5:return n=r().warehouses.selected.products.items,a=r().warehouses.selected.productsForDelete,e.next=9,t(Qe({productsDistributions:n,productsForDelete:a}));case 9:t({type:L,totalCount:r().warehouses.list.pagination.totalCount-1}),t({type:F,items:Object(E.a)(r().warehouses.list.items.filter((function(e){return e.id!==r().warehouses.selected.item.id})))}),t({type:D,loading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),t({type:P,error:e.t0}),t({type:D,loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}());case 2:this.props.selectedError||this.onWarehouseClose();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onClickRemoveWarehouseWithMove",value:function(){var e=Object(k.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(Re(bt({},this.state)));case 2:this.onClickRemoveWarehouse();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onShowBeforeRemoveModal",value:function(){this.props.onClose(),this.setState({showBeforeRemoveModal:!0})}},{key:"onShowMoveBeforeRemoveModal",value:function(){this.setState({showBeforeRemoveModal:!1,showMoveBeforeRemoveModal:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ge.a,{show:this.props.show,onHide:function(){return e.onWarehouseClose()},onShow:function(){return e.featchWarehouseProducts()}},s.a.createElement(Ve.a,{onSubmit:function(t){return e.onClickWarehouseSave(t)}},s.a.createElement(Ge.a.Header,{closeButton:!0},s.a.createElement(Ge.a.Title,null,"Warehouse information")),s.a.createElement(Ge.a.Body,{style:{position:"relative"}},this.props.selectedLoading&&s.a.createElement(Ue,{full:!0}),!!this.props.selectedError&&s.a.createElement(m.a,{variant:"danger"},this.props.selectedError.message),s.a.createElement(Ve.a.Group,null,s.a.createElement(Ve.a.Label,null,"Warehouse title"),s.a.createElement(Ve.a.Control,{type:"text",placeholder:"Enter warehouse title",required:!0,value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})}})),s.a.createElement(ft,null)),s.a.createElement(Ge.a.Footer,null,s.a.createElement(w.a,{variant:"secondary",onClick:function(){return e.onWarehouseClose()}},"Close"),this.state.id&&s.a.createElement(w.a,{variant:"danger",onClick:function(){return e.onShowBeforeRemoveModal()}},"Remove"),s.a.createElement(w.a,{variant:"primary",type:"submit"},"Save Changes")))),s.a.createElement(Ge.a,{show:this.state.showBeforeRemoveModal,onHide:function(){return e.onWarehouseClose()}},s.a.createElement(Ge.a.Header,{closeButton:!0},s.a.createElement(Ge.a.Title,null,"Question")),s.a.createElement(Ge.a.Body,{style:{position:"relative"}},"Are you want to remove the warehouse?"),s.a.createElement(Ge.a.Footer,null,s.a.createElement(w.a,{variant:"secondary",onClick:function(){return e.onWarehouseClose()}},"Close"),!!this.props.selectedWarehouseProducts.length&&s.a.createElement(w.a,{variant:"primary",onClick:function(){return e.onShowMoveBeforeRemoveModal()}},"Move product before remove"),s.a.createElement(w.a,{variant:"danger",onClick:function(){return e.onClickRemoveWarehouse()}},"Yes, remove"))),s.a.createElement(Ge.a,{show:this.state.showMoveBeforeRemoveModal,onHide:function(){return e.onWarehouseClose()}},s.a.createElement(Ge.a.Header,{closeButton:!0},s.a.createElement(Ge.a.Title,null,"Move products for another warehouses")),s.a.createElement(Ge.a.Body,{style:{position:"relative"}},s.a.createElement(ft,{onlyMove:!0})),s.a.createElement(Ge.a.Footer,null,s.a.createElement(w.a,{variant:"secondary",onClick:function(){return e.onWarehouseClose()}},"Close"),s.a.createElement(w.a,{variant:"danger",onClick:function(){return e.onClickRemoveWarehouseWithMove()}},"Move and remove"))))}}]),t}(a.Component);var mt=Object(b.b)((function(e){return{selectedWarehouseProducts:e.warehouses.selected.products.items,selectedWarehouse:e.warehouses.selected.item,selectedLoading:e.warehouses.selected.loading,selectedError:e.warehouses.selected.error}}))(wt),yt=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={showWarehouseModal:!1},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.feachMoreWarehouses()}},{key:"feachMoreWarehouses",value:function(){this.props.dispatch(function(){var e=Object(k.a)(O.a.mark((function e(t,r){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r().warehouses.list.pagination.loading||0!==r().warehouses.list.pagination.totalCount&&r().warehouses.list.pagination.totalCount<=r().warehouses.list.items.length)){e.next=3;break}return e.abrupt("return");case 3:return t({type:I,error:null}),t({type:R,loading:!0}),e.next=7,Q({page:r().warehouses.list.pagination.page,limit:r().warehouses.list.pagination.limit});case 7:n=e.sent,t({type:F,items:[].concat(Object(E.a)(r().warehouses.list.items),Object(E.a)(n.items))}),t({type:_,page:r().warehouses.list.pagination.page+1}),t({type:L,totalCount:n.totalCount}),t({type:R,loading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),t({type:I,error:e.t0}),t({type:R,loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}())}},{key:"onClickWarehouse",value:function(e){this.props.dispatch({type:S,warehouse:e}),this.setState({showWarehouseModal:!0})}},{key:"onScrollList",value:function(e){e.scrollHeight-e.scrollTop===e.clientHeight&&this.feachMoreWarehouses()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{style:{justifyContent:"space-between",display:"flex"},className:"my-3"},s.a.createElement("h4",null,"Warehouses list"),s.a.createElement(w.a,{onClick:function(){return e.setState({showWarehouseModal:!0})}},"Add warehouse"),s.a.createElement(mt,{onClose:function(){return e.setState({showWarehouseModal:!1})},show:this.state.showWarehouseModal})),!!this.props.listError&&s.a.createElement(m.a,{variant:"danger"},this.props.listError.message),s.a.createElement("div",{style:{position:"relative"}},s.a.createElement("div",{style:{height:"calc(100vh - 98px)",overflow:"auto"},onScroll:function(t){return e.onScrollList(t.target)}},s.a.createElement(y.a,{striped:!0,bordered:!0,hover:!0,className:"mb-0"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"#"),s.a.createElement("th",null,"Title"),s.a.createElement("th",null,"Products quantity"))),s.a.createElement("tbody",null,this.props.listItems.map((function(t){return s.a.createElement("tr",{key:t.id,onClick:function(){return e.onClickWarehouse(t)}},s.a.createElement("td",null,t.id),s.a.createElement("td",null,t.title),s.a.createElement("td",null,t.productsQuantity))}))))),this.props.listLoading&&s.a.createElement(Ue,{full:!0})))}}]),t}(a.Component);var gt=Object(b.b)((function(e){return{selectedItem:e.warehouses.selected.item,listItems:e.warehouses.list.items,listLoading:e.warehouses.list.loading,listError:e.warehouses.list.error}}))(yt);function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(r,!0).forEach((function(t){Object(ce.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kt=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={warehousesSelectPagination:{page:1,limit:10,totalCount:0,count:0,loading:!1,searchString:""}},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e.warehousesDistributions!==this.props.warehousesDistributions&&this.resetOptions()}},{key:"onChangeWarehouse",value:function(e){this.props.dispatch(Ce({warehouseDistributions:this.props.warehouseDistributions,warehouse:e.value}))}},{key:"onChangeQuantity",value:function(e){this.props.dispatch(Ce({warehouseDistributions:this.props.warehouseDistributions,quantity:e}))}},{key:"loadOptions",value:function(){var e=Object(k.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.warehousesSelectPagination.loading){e.next=2;break}return e.abrupt("return");case 2:return this.setState({warehousesSelectPagination:Et({},this.state.warehousesSelectPagination,{loading:!0})}),t!==this.state.warehousesSelectPagination.searchString&&this.resetOptions(),e.next=6,Q({searchString:t,page:this.state.warehousesSelectPagination.page,limit:this.state.warehousesSelectPagination.limit});case 6:return r=e.sent,this.setState({warehousesSelectPagination:Et({},this.state.warehousesSelectPagination,{totalCount:r.totalCount,count:this.state.warehousesSelectPagination.count+r.items.length,page:this.state.warehousesSelectPagination.page+1,loading:!1,searchString:t})}),e.abrupt("return",{options:r.items.map((function(e){return{value:e,label:e.title}})),hasMore:0!==this.state.warehousesSelectPagination.totalCount&&this.state.warehousesSelectPagination.totalCount>this.state.warehousesSelectPagination.count});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterOptionsBySelected",value:function(e){var t=this;return e.filter((function(e){return!t.props.warehousesDistributions.find((function(t){return!!t.warehouse&&t.warehouse.id===e.value.id}))}))}},{key:"reduceSelectOptions",value:function(e,t){return[].concat(Object(E.a)(e),Object(E.a)(this.filterOptionsBySelected(t)))}},{key:"resetOptions",value:function(){this.setState({warehousesSelectPagination:Et({},this.state.warehousesSelectPagination,{cacheVersion:this.state.warehousesSelectPagination.cacheVersion+1,page:1,totalCount:0,count:0})})}},{key:"onClickRemove",value:function(){var e;this.props.dispatch((e=this.props.warehouseDistributions,function(){var t=Object(k.a)(O.a.mark((function t(r,n){var a,s,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n().products.selected.warehouses.items,s=a.indexOf(e),o=n().products.selected.item,-1!==s){t.next=5;break}return t.abrupt("return",console.warn("No found warehouseDistributions for remove"));case 5:o.freeQuantity+=a[s].quantity,a.splice(s,1),r(Me(e)),r({type:fe,items:Object(E.a)(a)}),r({type:le,product:ke({},n().products.selected.item)});case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ve.a.Row,{className:"my-3"},s.a.createElement(v.a,null,s.a.createElement(Ke,{cacheUniq:this.props.warehousesDistributions,reduceOptions:function(t,r){return e.reduceSelectOptions(t,r)},loadOptions:function(t){return e.loadOptions(t)},onChange:function(t){return e.onChangeWarehouse(t)},value:this.props.warehouseDistributions.warehouse&&{label:this.props.warehouseDistributions.warehouse.title,value:this.props.warehouseDistributions.warehouse}})),s.a.createElement(v.a,null,s.a.createElement(Ve.a.Control,{required:!0,placeholder:"Quantity",type:"number",min:0,disabled:!this.props.warehouseDistributions.warehouse,value:this.props.warehouseDistributions.quantity,onChange:function(t){return e.onChangeQuantity(+t.target.value)}})),s.a.createElement(v.a,null,s.a.createElement($e.a,{style:{width:160}},s.a.createElement(w.a,{variant:"danger",onClick:function(){return e.onClickRemove()}},"Remove")))))}}]),t}(a.Component);var xt=Object(b.b)((function(e){return{warehousesDistributions:e.products.selected.warehouses.items}}))(kt),jt=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onClickAddWarehousesDistribution",value:function(){this.props.dispatch(function(){var e=Object(k.a)(O.a.mark((function e(t,r){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=r().products.selected.warehouses.items).push({id:j()(),warehouse:null,quantity:0,isNew:!0}),t({type:fe,items:Object(E.a)(n)});case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,(!!this.props.selectedProduct.freeQuantity||!!this.props.selectedProductWarehouses.length)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",null,"List of owned warehouses"),!!this.props.selectedProductError&&s.a.createElement(m.a,{variant:"danger"},this.props.selectedProductError.message),s.a.createElement("div",{style:{position:"relative"}},this.props.selectedProductWarehouses.map((function(e){return s.a.createElement(xt,{key:e.id,warehouseDistributions:e})})),this.props.selectedProductLoading&&s.a.createElement(Ue,null)),this.props.selectedProduct&&s.a.createElement("div",{className:"mb-3"},"Free count: ",this.props.selectedProduct.freeQuantity),!this.props.selectedProductLoading&&s.a.createElement(w.a,{block:!0,onClick:function(){return e.onClickAddWarehousesDistribution()}},"Add to warehouse")))}}]),t}(a.Component);var St=Object(b.b)((function(e){return{selectedProduct:e.products.selected.item,selectedProductWarehouses:e.products.selected.warehouses.items,selectedProductLoading:e.products.selected.warehouses.loading,selectedProductError:e.products.selected.warehouses.error}}))(jt),Dt=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={showBeforeRemoveModal:!1},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onClickProductSave",value:function(){var e=Object(k.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.dispatch(De());case 3:this.props.selectedError||this.onProductClose();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onProductClose",value:function(){this.setState({id:null,title:"",quantity:0,showBeforeRemoveModal:!1}),this.props.dispatch(je()),this.props.onClose()}},{key:"featchProductWarehouses",value:function(){this.props.selectedProduct&&this.props.dispatch(xe())}},{key:"onClickRemoveProduct",value:function(){var e=Object(k.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.dispatch(function(){var e=Object(k.a)(O.a.mark((function e(t,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:de,error:null}),t({type:pe,loading:!0}),e.next=5,ie(r().products.selected.item);case 5:return e.next=7,t(qe(r().products.selected.warehouses.items));case 7:t({type:Oe,totalCount:r().products.list.pagination.totalCount-1}),t({type:we,items:Object(E.a)(r().products.list.items.filter((function(e){return e.id!==r().products.selected.item.id})))}),t({type:pe,loading:!1}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:de,error:e.t0}),t({type:pe,loading:!1});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}());case 2:this.props.selectedError||this.onProductClose();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onShowBeforeRemoveModal",value:function(){this.props.onClose(),this.setState({showBeforeRemoveModal:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ge.a,{show:this.props.show,onHide:function(){return e.onProductClose()},onShow:function(){return e.featchProductWarehouses()}},s.a.createElement(Ve.a,{onSubmit:function(t){return e.onClickProductSave(t)}},s.a.createElement(Ge.a.Header,{closeButton:!0},s.a.createElement(Ge.a.Title,null,"Product information")),s.a.createElement(Ge.a.Body,{style:{position:"relative"}},this.props.selectedLoading&&s.a.createElement(Ue,{full:!0}),!!this.props.selectedError&&s.a.createElement(m.a,{variant:"danger"},this.props.selectedError.message),s.a.createElement(Ve.a.Group,null,s.a.createElement(Ve.a.Label,null,"Product title"),s.a.createElement(Ve.a.Control,{type:"text",required:!0,placeholder:"Enter product title",value:this.props.selectedProduct.title||"",onChange:function(t){return e.props.dispatch(Se({title:t.target.value}))}})),s.a.createElement(Ve.a.Group,null,s.a.createElement(Ve.a.Label,null,"Product quantity"),s.a.createElement(Ve.a.Control,{required:!0,type:"number",min:0,placeholder:"Enter product quantity",value:this.props.selectedProduct.quantity||0,onChange:function(t){return e.props.dispatch(Se({quantity:+t.target.value}))}})),s.a.createElement(St,{quantity:this.state.quantity,onChange:function(t,r){return e.setState({warehousesDistributions:t,warehousesDistributionsToDelete:r})},onChangeQuantitySum:function(t){return e.setState({minQuantity:t})}})),s.a.createElement(Ge.a.Footer,null,s.a.createElement(w.a,{variant:"secondary",onClick:function(){return e.onProductClose()}},"Close"),this.props.selectedProduct.id&&s.a.createElement(w.a,{variant:"danger",onClick:function(){return e.onShowBeforeRemoveModal()}},"Remove"),s.a.createElement(w.a,{variant:"primary",type:"submit"},"Save Changes")))),s.a.createElement(Ge.a,{show:this.state.showBeforeRemoveModal,onHide:function(){return e.onProductClose()}},s.a.createElement(Ge.a.Header,{closeButton:!0},s.a.createElement(Ge.a.Title,null,"Question")),s.a.createElement(Ge.a.Body,{style:{position:"relative"}},"Are you want to remove the product? It will be removed from all warehouses."),s.a.createElement(Ge.a.Footer,null,s.a.createElement(w.a,{variant:"secondary",onClick:function(){return e.onProductClose()}},"Close"),s.a.createElement(w.a,{variant:"danger",onClick:function(){return e.onClickRemoveProduct()}},"Yes, remove"))))}}]),t}(a.Component);var Pt=Object(b.b)((function(e){return{selectedProduct:e.products.selected.item,selectedProductWarehouses:e.products.selected.warehouses.items,selectedLoading:e.products.selected.loading,selectedError:e.products.selected.error}}))(Dt),Ct=function(e){function t(){var e,r;Object(u.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={showProductModal:!1},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.feachMoreProducts();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"feachMoreProducts",value:function(){this.props.listLoading||this.props.dispatch(function(){var e=Object(k.a)(O.a.mark((function e(t,r){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r().products.list.pagination.loading||0!==r().products.list.pagination.totalCount&&r().products.list.pagination.totalCount<=r().products.list.items.length)){e.next=3;break}return e.abrupt("return");case 3:return t({type:ye,error:null}),t({type:me,loading:!0}),e.next=7,Z({page:r().products.list.pagination.page,limit:r().products.list.pagination.limit});case 7:n=e.sent,t({type:we,items:[].concat(Object(E.a)(r().products.list.items),Object(E.a)(n.items))}),t({type:ge,page:r().products.list.pagination.page+1}),t({type:Oe,totalCount:n.totalCount}),t({type:me,loading:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),t({type:ye,error:e.t0}),t({type:me,loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}())}},{key:"onClickProduct",value:function(e){this.props.dispatch({type:le,product:e}),this.setState({showProductModal:!0})}},{key:"onClickAddProduct",value:function(){this.setState({showProductModal:!0})}},{key:"onScrollList",value:function(e){e.scrollHeight-e.scrollTop===e.clientHeight&&this.feachMoreProducts()}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{justifyContent:"space-between",display:"flex"},className:"my-3"},s.a.createElement("h4",null,"Products list"),s.a.createElement(w.a,{onClick:function(){return e.onClickAddProduct()}},"Add product"),s.a.createElement(Pt,{onClose:function(){return e.setState({showProductModal:!1})},show:this.state.showProductModal})),!!this.props.listError&&s.a.createElement(m.a,{variant:"danger"},this.props.listError.message),s.a.createElement("div",{style:{position:"relative"}},s.a.createElement("div",{style:{height:"calc(100vh - 96px)",overflow:"auto"},onScroll:function(t){return e.onScrollList(t.target)}},s.a.createElement(y.a,{striped:!0,bordered:!0,hover:!0,className:"mb-0"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"#"),s.a.createElement("th",null,"Title"),s.a.createElement("th",null,"Free"),s.a.createElement("th",null,"Quantity"))),s.a.createElement("tbody",null,this.props.listItems.map((function(t){return s.a.createElement("tr",{key:t.id,onClick:function(){return e.onClickProduct(t)}},s.a.createElement("td",null,t.id),s.a.createElement("td",null,t.title),s.a.createElement("td",null,t.freeQuantity),s.a.createElement("td",null,t.quantity))}))))),this.props.listLoading&&s.a.createElement(Ue,{full:!0})))}}]),t}(a.Component);var Mt=Object(b.b)((function(e){return{selectedWarehouse:e.warehouses.selected.item,selectedItem:e.products.selected.item,listItems:e.products.list.items,listLoading:e.products.list.loading,listError:e.products.list.error}}))(Ct),qt=r(33),Tt=r(86),Wt=r(87);function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(r,!0).forEach((function(t){Object(ce.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var It={selected:{item:{},warehouses:{items:[],error:null,loading:!1},error:null,loading:!1,warehousesForDelete:[]},list:{items:[],error:null,loading:!1,pagination:{page:1,limit:20}}},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Rt({},e,{selected:Rt({},e.selected,{item:t.product})});case pe:return Rt({},e,{selected:Rt({},e.selected,{loading:t.loading})});case de:return Rt({},e,{selected:Rt({},e.selected,{error:t.error})});case he:return Rt({},e,{selected:Rt({},e.selected,{warehousesForDelete:t.warehousesForDelete})});case fe:return Rt({},e,{selected:Rt({},e.selected,{warehouses:Rt({},e.selected.warehouses,{items:t.items})})});case ve:return Rt({},e,{selected:Rt({},e.selected,{warehouses:Rt({},e.selected.warehouses,{error:t.error})})});case be:return Rt({},e,{selected:Rt({},e.selected,{warehouses:Rt({},e.selected.warehouses,{loading:t.loading})})});case we:return Rt({},e,{list:Rt({},e.list,{items:t.items})});case ge:return Rt({},e,{list:Rt({},e.list,{pagination:Rt({},e.list.pagination,{page:t.page})})});case Oe:return Rt({},e,{list:Rt({},e.list,{pagination:Rt({},e.list.pagination,{totalCount:+t.totalCount})})});case me:return Rt({},e,{list:Rt({},e.list,{loading:t.loading})});case ye:return Rt({},e,{list:Rt({},e.list,{error:t.error})});default:return e}},Lt=Object(qt.createStore)(Object(qt.combineReducers)(n),Object(Wt.composeWithDevTools)(Object(qt.applyMiddleware)(Tt.a))),Nt=(r(140),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(b.a,{store:Lt},s.a.createElement(h.a,null,s.a.createElement(f.a,null,s.a.createElement(v.a,{className:"full-height",xs:"12",md:"6"},s.a.createElement(gt,null)),s.a.createElement(v.a,{className:"full-height",xs:"12",md:"6"},s.a.createElement(Mt,null)))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(Nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},89:function(e,t,r){e.exports=r(141)}},[[89,1,2]]]);
//# sourceMappingURL=main.07b078df.chunk.js.map